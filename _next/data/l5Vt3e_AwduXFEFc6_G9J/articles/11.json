{"pageProps":{"issue":{"body":"","bodyHTML":"","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/r7kamura/diary/issues/11/comments","created_at":"2022-05-16T20:41:17Z","events_url":"https://api.github.com/repos/r7kamura/diary/issues/11/events","html_url":"https://github.com/r7kamura/diary/issues/11","id":1237694240,"labels":[],"labels_url":"https://api.github.com/repos/r7kamura/diary/issues/11/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHTcevs5Jxbcg","number":11,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/11/reactions"},"repository_url":"https://api.github.com/repos/r7kamura/diary","state":"open","timeline_url":"https://api.github.com/repos/r7kamura/diary/issues/11/timeline","title":"2022-05-17","updated_at":"2022-05-16T20:41:17Z","url":"https://api.github.com/repos/r7kamura/diary/issues/11","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},"issueComments":[{"body":"作業配信する。\r\n[作業 with r7kamura #17 - YouTube](https://www.youtube.com/watch?v=0Os38r8twGk&ab_channel=r7kamura)","bodyHTML":"<p>作業配信する。\r\n<a href=\"https://www.youtube.com/watch?v=0Os38r8twGk&#x26;ab_channel=r7kamura\">作業 with r7kamura #17 - YouTube</a></p>","author_association":"OWNER","created_at":"2022-05-16T20:42:35Z","html_url":"https://github.com/r7kamura/diary/issues/11#issuecomment-1128116146","id":1128116146,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/11","node_id":"IC_kwDOHTcevs5DPa-y","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1128116146/reactions"},"updated_at":"2022-05-16T20:42:35Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1128116146","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"rubocop-todo-correctorを業務のRailsアプリの一つに導入した。上手く動いていることを確認した。","bodyHTML":"<p>rubocop-todo-correctorを業務のRailsアプリの一つに導入した。上手く動いていることを確認した。</p>","author_association":"OWNER","created_at":"2022-05-16T20:43:13Z","html_url":"https://github.com/r7kamura/diary/issues/11#issuecomment-1128116596","id":1128116596,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/11","node_id":"IC_kwDOHTcevs5DPbF0","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1128116596/reactions"},"updated_at":"2022-05-16T20:43:13Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1128116596","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"r7kamura/diaryにRSSを追加した。\r\nhttps://github.com/r7kamura/diary/pull/10","bodyHTML":"<p>r7kamura/diaryにRSSを追加した。\r\n<a href=\"https://github.com/r7kamura/diary/pull/10\">#10</a></p>","author_association":"OWNER","created_at":"2022-05-16T20:43:26Z","html_url":"https://github.com/r7kamura/diary/issues/11#issuecomment-1128116786","id":1128116786,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/11","node_id":"IC_kwDOHTcevs5DPbIy","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1128116786/reactions"},"updated_at":"2022-05-16T20:43:26Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1128116786","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"Amazon URL ShortenerでURLが短縮されないページを見つけたので、色々試してみた。同じようなの本ページでも、いけるものと駄目なものがある。すると、`window.onload = ...` というコードだと上手く動かないページもあるということが分かった。\r\n\r\ncontent scriptの実行タイミングをmanifestで調整できるようで、ドキュメントを読み終わった後に実行してもらうようにすれば、window.onloadに頼らなくて済む。そもそもwindow.addEventListenerを使いなさいよという話ではあるのだが。という訳で、これを使うようにした。\r\n\r\nまた、ドキュメント内の要素からASINを見つけられなかった場合にのみURLパターンから正規表現でASINを取り出すというフォールバックを用意したので、これでAmazonフレッシュのような特殊なページにも対応できるようになった。面白いことに、Amazonフレッシュのページではクエリ情報を取り除いたURLでのみ「この商品は過去に50回購入しています」的な情報が表示される。つまり、短縮した方が情報が増える。\r\n\r\n- https://developer.chrome.com/docs/extensions/mv3/content_scripts/#registration\r\n- https://github.com/r7kamura/amazon_url_shortener","bodyHTML":"<p>Amazon URL ShortenerでURLが短縮されないページを見つけたので、色々試してみた。同じようなの本ページでも、いけるものと駄目なものがある。すると、<code>window.onload = ...</code> というコードだと上手く動かないページもあるということが分かった。</p>\n<p>content scriptの実行タイミングをmanifestで調整できるようで、ドキュメントを読み終わった後に実行してもらうようにすれば、window.onloadに頼らなくて済む。そもそもwindow.addEventListenerを使いなさいよという話ではあるのだが。という訳で、これを使うようにした。</p>\n<p>また、ドキュメント内の要素からASINを見つけられなかった場合にのみURLパターンから正規表現でASINを取り出すというフォールバックを用意したので、これでAmazonフレッシュのような特殊なページにも対応できるようになった。面白いことに、Amazonフレッシュのページではクエリ情報を取り除いたURLでのみ「この商品は過去に50回購入しています」的な情報が表示される。つまり、短縮した方が情報が増える。</p>\n<ul>\n<li><a href=\"https://developer.chrome.com/docs/extensions/mv3/content_scripts/#registration\">https://developer.chrome.com/docs/extensions/mv3/content_scripts/#registration</a></li>\n<li><a href=\"https://github.com/r7kamura/amazon_url_shortener\">https://github.com/r7kamura/amazon_url_shortener</a></li>\n</ul>","author_association":"OWNER","created_at":"2022-05-16T21:42:10Z","html_url":"https://github.com/r7kamura/diary/issues/11#issuecomment-1128166471","id":1128166471,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/11","node_id":"IC_kwDOHTcevs5DPnRH","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1128166471/reactions"},"updated_at":"2022-05-16T21:42:10Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1128166471","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}}]},"__N_SSG":true}