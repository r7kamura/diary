<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="alternate" type="application/rss+xml" href="/diary/feed.xml"/><title>2022-05-12</title><meta name="next-head-count" content="4"/><link rel="preload" href="/diary/_next/static/css/53c86b12cba2fce5.css" as="style"/><link rel="stylesheet" href="/diary/_next/static/css/53c86b12cba2fce5.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/diary/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/diary/_next/static/chunks/webpack-744535720990f482.js" defer=""></script><script src="/diary/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/diary/_next/static/chunks/main-a03413948affdc5e.js" defer=""></script><script src="/diary/_next/static/chunks/pages/_app-52d68962ce2ec0d8.js" defer=""></script><script src="/diary/_next/static/chunks/pages/articles/%5BissueNumber%5D-8b81430280370301.js" defer=""></script><script src="/diary/_next/static/dA1a87PnWXTIihFYGUYgy/_buildManifest.js" defer=""></script><script src="/diary/_next/static/dA1a87PnWXTIihFYGUYgy/_ssgManifest.js" defer=""></script><script src="/diary/_next/static/dA1a87PnWXTIihFYGUYgy/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><header><nav><p><a href="/diary">r7kamura/diary</a></p></nav></header><main><article><section><header><h1>2022-05-12</h1></header><aside><p>Posted by <!-- --><a href="https://github.com/r7kamura">r7kamura</a> at <!-- --><a href="https://github.com/r7kamura/diary/issues/5">#5</a>.<!-- --></p></aside><div></div></section><article><section><div><p>調べたら、うちのマイクアームが3/8オスのネジ、ウェブカメラのマウントパーツが1/4メスのネジ穴を持っているようだった。そこで、1/4オスと3/8メスを持つ変換パーツをAmazonで注文した。</p>
<ul>
<li><a href="https://www.amazon.co.jp/dp/B08XPZWR24">https://www.amazon.co.jp/dp/B08XPZWR24</a></li>
</ul></div></section></article><article><section><div><p>Gemfile.lockの差分をJSONで表示するライブラリと、それを利用して差分が無いことを検知するGitHub Actionsが欲しい。</p></div></section></article><article><section><div><p>こんな感じで、いま現在そのGemfile.lockで指定されているGemについて、バージョンと名前をまとめたやつをJSONとして出力してくれるやつをとりあえず用意すれば良いかな。</p>
<pre><code class="language-ruby">require 'bundler'
require 'json'

content = File.read('Gemfile.lock')
parser = Bundler::LockfileParser.new(content)
array = parser.specs.map do |specification|
  {
    name: specification.name,
    version: specification.version
  }
end
puts JSON.pretty_generate(array)
</code></pre>
<p>こういう感じになる</p>
<pre><code class="language-json">[
  {
    "name": "zache",
    "version": "0.12.0"
  },
  {
    "name": "zeitwerk",
    "version": "2.5.3"
  },
  {
    "name": "zip_tricks",
    "version": "5.6.0"
  }
]
</code></pre>
<hr>
<pre><code class="language-ruby">require 'bundler'
require 'json'

content = File.read('Gemfile.lock')
parser = Bundler::LockfileParser.new(content)
result = parser.specs.each_with_object({}) do |specification, hash|
  hash[specification.name] = specification.version
end
puts JSON.pretty_generate(result)
</code></pre>
<pre><code class="language-json">{
  "zache": "0.12.0",
  "zeitwerk": "2.5.3",
  "zip_tricks": "5.6.0"
}
</code></pre>
<p>Object形式にまとめた方がいいか。</p></div></section></article><article><section><div><p>GitHub Actionsのcustom actionのinputsに、allow_listのような <code>Array&#x3C;String></code> を渡したいが、これは <code>String</code> しか受け付けていない。</p>
<ul>
<li><a href="https://docs.github.com/en//actions/creating-actions/metadata-syntax-for-github-actions">https://docs.github.com/en//actions/creating-actions/metadata-syntax-for-github-actions</a></li>
</ul>
<p>YAMLのヒアドキュメント記法は指示子を指定しなければスペース区切りにできたはずなので、スペース区切りで指定するという制約でいこうかな。</p>
<pre><code>irb(main):067:0" YAML.load &#x3C;&#x3C;-EOS
irb(main):068:0" foo:
irb(main):069:0"   bar
irb(main):070:0"   baz
irb(main):071:0> EOS
=> {"foo"=>"bar baz"}
</code></pre></div></section></article><article><section><div><p>Rubyでカラー表示するの、diffy gemが楽そうだったのでこれ使おうかな。</p>
<p><a href="https://github.com/samg/diffy">https://github.com/samg/diffy</a></p>
<pre><code>$ irb -rdiffy
irb(main):002:0" a = &#x3C;&#x3C;EOS
irb(main):003:0" 1
irb(main):004:0" 2
irb(main):005:0" 3
irb(main):006:0> EOS
=> "1\n2\n3\n"
irb(main):007:0" b = &#x3C;&#x3C;EOS
irb(main):008:0" 2
irb(main):009:0" 2
irb(main):010:0" 4
irb(main):011:0> EOS
=> "2\n2\n4\n"
irb(main):012:0> puts Diffy::Diff.new(a, b)
-1
 2                                                           
-3                                                           
+2                                                           
+4                                                           
=> nil                                                       
irb(main):014:0> puts Diffy::Diff.new(a, b).to_s(:color)
-1
 2                                                                                                    
-3                                                                                                    
+2                                                                                                    
+4                                                                                                    
=> nil
</code></pre>
<p>diff-lcsという老舗のやつも調べたけど面倒になってきた。</p>
<ul>
<li><a href="https://github.com/halostatue/diff-lcs">https://github.com/halostatue/diff-lcs</a></li>
</ul></div></section></article><article><section><div><p>2つのGemfile.lockの差分を検査して、差分があればエラーにしてdiffをANSIカラー付きで表示するCustom actionを書いた。</p>
<ul>
<li><a href="https://github.com/r7kamura/gemfile-diff">https://github.com/r7kamura/gemfile-diff</a></li>
</ul>
<p>実際プロダクションで動かしてみたら不具合が5件ぐらい見つかった (酷い) が、修正したら意図通り動くようになったのでOKだろう。</p>
<p>質とスピードの話で、およそ4回手動でテストした辺りで自動テストを書いた方が効率が良くなってくるという話があった気がする。今回は書かなかったが、テストを簡単に書けるような実装にはしておいたので、書いてみても良かったかもしれない。</p></div></section></article><article><section><div><p>.rubocop_todo.ymlを見て勝手にPull Requestを出してくれるやつがあると教えてもらった。</p>
<ul>
<li><a href="https://github.com/ryz310/rubocop_challenger">https://github.com/ryz310/rubocop_challenger</a></li>
</ul></div></section></article><article><section><div><p>配信のカメラの角度を変えて、PCの画面が完全に映らないようにした。お互い気が散るため。</p></div></section></article><article><section><div><p>rubocop_challengerはコードを読んでみたものの、怪しい箇所が多く、自作した方が良いような気もしてきた。</p></div></section></article><article><section><div><p>チャプター情報が上手く書き出されていた。</p>
<ul>
<li><a href="https://r7kamura.com/articles/2022-05-11-obs-auto-chapter">OBSでチャプター情報を自動で書き出す</a></li>
<li><a href="https://www.youtube.com/watch?v=IFeJ3nFHPKI">作業 with r7kamura #12 - YouTube</a></li>
</ul></div></section></article></article></main><footer><nav><ul><li><a href="/diary">Home</a></li><li><a href="/diary/feed.xml">RSS</a></li><li><a href="https://github.com/r7kamura/diary">Code</a></li></ul></nav></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"body":"","bodyHTML":"","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/r7kamura/diary/issues/5/comments","created_at":"2022-05-11T21:15:35Z","events_url":"https://api.github.com/repos/r7kamura/diary/issues/5/events","html_url":"https://github.com/r7kamura/diary/issues/5","id":1233192781,"labels":[],"labels_url":"https://api.github.com/repos/r7kamura/diary/issues/5/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHTcevs5JgQdN","number":5,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/5/reactions"},"repository_url":"https://api.github.com/repos/r7kamura/diary","state":"open","timeline_url":"https://api.github.com/repos/r7kamura/diary/issues/5/timeline","title":"2022-05-12","updated_at":"2022-05-11T21:15:35Z","url":"https://api.github.com/repos/r7kamura/diary/issues/5","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},"issueComments":[{"body":"調べたら、うちのマイクアームが3/8オスのネジ、ウェブカメラのマウントパーツが1/4メスのネジ穴を持っているようだった。そこで、1/4オスと3/8メスを持つ変換パーツをAmazonで注文した。\r\n\r\n- https://www.amazon.co.jp/dp/B08XPZWR24","bodyHTML":"\u003cp\u003e調べたら、うちのマイクアームが3/8オスのネジ、ウェブカメラのマウントパーツが1/4メスのネジ穴を持っているようだった。そこで、1/4オスと3/8メスを持つ変換パーツをAmazonで注文した。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.amazon.co.jp/dp/B08XPZWR24\"\u003ehttps://www.amazon.co.jp/dp/B08XPZWR24\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","author_association":"OWNER","created_at":"2022-05-11T21:17:35Z","html_url":"https://github.com/r7kamura/diary/issues/5#issuecomment-1124303773","id":1124303773,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/5","node_id":"IC_kwDOHTcevs5DA4Od","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124303773/reactions"},"updated_at":"2022-05-11T21:17:35Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124303773","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"Gemfile.lockの差分をJSONで表示するライブラリと、それを利用して差分が無いことを検知するGitHub Actionsが欲しい。","bodyHTML":"\u003cp\u003eGemfile.lockの差分をJSONで表示するライブラリと、それを利用して差分が無いことを検知するGitHub Actionsが欲しい。\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-11T21:22:58Z","html_url":"https://github.com/r7kamura/diary/issues/5#issuecomment-1124307700","id":1124307700,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/5","node_id":"IC_kwDOHTcevs5DA5L0","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124307700/reactions"},"updated_at":"2022-05-11T21:22:58Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124307700","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"こんな感じで、いま現在そのGemfile.lockで指定されているGemについて、バージョンと名前をまとめたやつをJSONとして出力してくれるやつをとりあえず用意すれば良いかな。\r\n\r\n```ruby\r\nrequire 'bundler'\r\nrequire 'json'\r\n\r\ncontent = File.read('Gemfile.lock')\r\nparser = Bundler::LockfileParser.new(content)\r\narray = parser.specs.map do |specification|\r\n  {\r\n    name: specification.name,\r\n    version: specification.version\r\n  }\r\nend\r\nputs JSON.pretty_generate(array)\r\n```\r\n\r\nこういう感じになる\r\n\r\n```json\r\n[\r\n  {\r\n    \"name\": \"zache\",\r\n    \"version\": \"0.12.0\"\r\n  },\r\n  {\r\n    \"name\": \"zeitwerk\",\r\n    \"version\": \"2.5.3\"\r\n  },\r\n  {\r\n    \"name\": \"zip_tricks\",\r\n    \"version\": \"5.6.0\"\r\n  }\r\n]\r\n```\r\n\r\n---\r\n\r\n```ruby\r\nrequire 'bundler'\r\nrequire 'json'\r\n\r\ncontent = File.read('Gemfile.lock')\r\nparser = Bundler::LockfileParser.new(content)\r\nresult = parser.specs.each_with_object({}) do |specification, hash|\r\n  hash[specification.name] = specification.version\r\nend\r\nputs JSON.pretty_generate(result)\r\n```\r\n\r\n```json\r\n{\r\n  \"zache\": \"0.12.0\",\r\n  \"zeitwerk\": \"2.5.3\",\r\n  \"zip_tricks\": \"5.6.0\"\r\n}\r\n```\r\n\r\nObject形式にまとめた方がいいか。","bodyHTML":"\u003cp\u003eこんな感じで、いま現在そのGemfile.lockで指定されているGemについて、バージョンと名前をまとめたやつをJSONとして出力してくれるやつをとりあえず用意すれば良いかな。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-ruby\"\u003erequire 'bundler'\r\nrequire 'json'\r\n\r\ncontent = File.read('Gemfile.lock')\r\nparser = Bundler::LockfileParser.new(content)\r\narray = parser.specs.map do |specification|\r\n  {\r\n    name: specification.name,\r\n    version: specification.version\r\n  }\r\nend\r\nputs JSON.pretty_generate(array)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこういう感じになる\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e[\r\n  {\r\n    \"name\": \"zache\",\r\n    \"version\": \"0.12.0\"\r\n  },\r\n  {\r\n    \"name\": \"zeitwerk\",\r\n    \"version\": \"2.5.3\"\r\n  },\r\n  {\r\n    \"name\": \"zip_tricks\",\r\n    \"version\": \"5.6.0\"\r\n  }\r\n]\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003cpre\u003e\u003ccode class=\"language-ruby\"\u003erequire 'bundler'\r\nrequire 'json'\r\n\r\ncontent = File.read('Gemfile.lock')\r\nparser = Bundler::LockfileParser.new(content)\r\nresult = parser.specs.each_with_object({}) do |specification, hash|\r\n  hash[specification.name] = specification.version\r\nend\r\nputs JSON.pretty_generate(result)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e{\r\n  \"zache\": \"0.12.0\",\r\n  \"zeitwerk\": \"2.5.3\",\r\n  \"zip_tricks\": \"5.6.0\"\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eObject形式にまとめた方がいいか。\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-11T21:37:52Z","html_url":"https://github.com/r7kamura/diary/issues/5#issuecomment-1124318137","id":1124318137,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/5","node_id":"IC_kwDOHTcevs5DA7u5","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124318137/reactions"},"updated_at":"2022-05-11T21:43:16Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124318137","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"GitHub Actionsのcustom actionのinputsに、allow_listのような `Array\u003cString\u003e` を渡したいが、これは `String` しか受け付けていない。\r\n\r\n- https://docs.github.com/en//actions/creating-actions/metadata-syntax-for-github-actions\r\n\r\nYAMLのヒアドキュメント記法は指示子を指定しなければスペース区切りにできたはずなので、スペース区切りで指定するという制約でいこうかな。\r\n\r\n```\r\nirb(main):067:0\" YAML.load \u003c\u003c-EOS\r\nirb(main):068:0\" foo:\r\nirb(main):069:0\"   bar\r\nirb(main):070:0\"   baz\r\nirb(main):071:0\u003e EOS\r\n=\u003e {\"foo\"=\u003e\"bar baz\"}\r\n```","bodyHTML":"\u003cp\u003eGitHub Actionsのcustom actionのinputsに、allow_listのような \u003ccode\u003eArray\u0026#x3C;String\u003e\u003c/code\u003e を渡したいが、これは \u003ccode\u003eString\u003c/code\u003e しか受け付けていない。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.github.com/en//actions/creating-actions/metadata-syntax-for-github-actions\"\u003ehttps://docs.github.com/en//actions/creating-actions/metadata-syntax-for-github-actions\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYAMLのヒアドキュメント記法は指示子を指定しなければスペース区切りにできたはずなので、スペース区切りで指定するという制約でいこうかな。\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eirb(main):067:0\" YAML.load \u0026#x3C;\u0026#x3C;-EOS\r\nirb(main):068:0\" foo:\r\nirb(main):069:0\"   bar\r\nirb(main):070:0\"   baz\r\nirb(main):071:0\u003e EOS\r\n=\u003e {\"foo\"=\u003e\"bar baz\"}\n\u003c/code\u003e\u003c/pre\u003e","author_association":"OWNER","created_at":"2022-05-11T21:50:42Z","html_url":"https://github.com/r7kamura/diary/issues/5#issuecomment-1124326669","id":1124326669,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/5","node_id":"IC_kwDOHTcevs5DA90N","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124326669/reactions"},"updated_at":"2022-05-11T21:50:42Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124326669","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"Rubyでカラー表示するの、diffy gemが楽そうだったのでこれ使おうかな。\r\n\r\nhttps://github.com/samg/diffy\r\n\r\n```\r\n$ irb -rdiffy\r\nirb(main):002:0\" a = \u003c\u003cEOS\r\nirb(main):003:0\" 1\r\nirb(main):004:0\" 2\r\nirb(main):005:0\" 3\r\nirb(main):006:0\u003e EOS\r\n=\u003e \"1\\n2\\n3\\n\"\r\nirb(main):007:0\" b = \u003c\u003cEOS\r\nirb(main):008:0\" 2\r\nirb(main):009:0\" 2\r\nirb(main):010:0\" 4\r\nirb(main):011:0\u003e EOS\r\n=\u003e \"2\\n2\\n4\\n\"\r\nirb(main):012:0\u003e puts Diffy::Diff.new(a, b)\r\n-1\r\n 2                                                           \r\n-3                                                           \r\n+2                                                           \r\n+4                                                           \r\n=\u003e nil                                                       \r\nirb(main):014:0\u003e puts Diffy::Diff.new(a, b).to_s(:color)\r\n-1\r\n 2                                                                                                    \r\n-3                                                                                                    \r\n+2                                                                                                    \r\n+4                                                                                                    \r\n=\u003e nil\r\n```\r\n\r\ndiff-lcsという老舗のやつも調べたけど面倒になってきた。\r\n\r\n- https://github.com/halostatue/diff-lcs","bodyHTML":"\u003cp\u003eRubyでカラー表示するの、diffy gemが楽そうだったのでこれ使おうかな。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/samg/diffy\"\u003ehttps://github.com/samg/diffy\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ irb -rdiffy\r\nirb(main):002:0\" a = \u0026#x3C;\u0026#x3C;EOS\r\nirb(main):003:0\" 1\r\nirb(main):004:0\" 2\r\nirb(main):005:0\" 3\r\nirb(main):006:0\u003e EOS\r\n=\u003e \"1\\n2\\n3\\n\"\r\nirb(main):007:0\" b = \u0026#x3C;\u0026#x3C;EOS\r\nirb(main):008:0\" 2\r\nirb(main):009:0\" 2\r\nirb(main):010:0\" 4\r\nirb(main):011:0\u003e EOS\r\n=\u003e \"2\\n2\\n4\\n\"\r\nirb(main):012:0\u003e puts Diffy::Diff.new(a, b)\r\n-1\r\n 2                                                           \r\n-3                                                           \r\n+2                                                           \r\n+4                                                           \r\n=\u003e nil                                                       \r\nirb(main):014:0\u003e puts Diffy::Diff.new(a, b).to_s(:color)\r\n-1\r\n 2                                                                                                    \r\n-3                                                                                                    \r\n+2                                                                                                    \r\n+4                                                                                                    \r\n=\u003e nil\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ediff-lcsという老舗のやつも調べたけど面倒になってきた。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/halostatue/diff-lcs\"\u003ehttps://github.com/halostatue/diff-lcs\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","author_association":"OWNER","created_at":"2022-05-11T22:03:43Z","html_url":"https://github.com/r7kamura/diary/issues/5#issuecomment-1124336789","id":1124336789,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/5","node_id":"IC_kwDOHTcevs5DBASV","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124336789/reactions"},"updated_at":"2022-05-11T22:04:41Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124336789","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"2つのGemfile.lockの差分を検査して、差分があればエラーにしてdiffをANSIカラー付きで表示するCustom actionを書いた。\r\n\r\n- https://github.com/r7kamura/gemfile-diff\r\n\r\n実際プロダクションで動かしてみたら不具合が5件ぐらい見つかった (酷い) が、修正したら意図通り動くようになったのでOKだろう。\r\n\r\n質とスピードの話で、およそ4回手動でテストした辺りで自動テストを書いた方が効率が良くなってくるという話があった気がする。今回は書かなかったが、テストを簡単に書けるような実装にはしておいたので、書いてみても良かったかもしれない。","bodyHTML":"\u003cp\u003e2つのGemfile.lockの差分を検査して、差分があればエラーにしてdiffをANSIカラー付きで表示するCustom actionを書いた。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/r7kamura/gemfile-diff\"\u003ehttps://github.com/r7kamura/gemfile-diff\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e実際プロダクションで動かしてみたら不具合が5件ぐらい見つかった (酷い) が、修正したら意図通り動くようになったのでOKだろう。\u003c/p\u003e\n\u003cp\u003e質とスピードの話で、およそ4回手動でテストした辺りで自動テストを書いた方が効率が良くなってくるという話があった気がする。今回は書かなかったが、テストを簡単に書けるような実装にはしておいたので、書いてみても良かったかもしれない。\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-11T23:11:13Z","html_url":"https://github.com/r7kamura/diary/issues/5#issuecomment-1124372663","id":1124372663,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/5","node_id":"IC_kwDOHTcevs5DBJC3","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124372663/reactions"},"updated_at":"2022-05-12T00:26:17Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124372663","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":".rubocop_todo.ymlを見て勝手にPull Requestを出してくれるやつがあると教えてもらった。\r\n\r\n- https://github.com/ryz310/rubocop_challenger","bodyHTML":"\u003cp\u003e.rubocop_todo.ymlを見て勝手にPull Requestを出してくれるやつがあると教えてもらった。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/ryz310/rubocop_challenger\"\u003ehttps://github.com/ryz310/rubocop_challenger\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","author_association":"OWNER","created_at":"2022-05-12T01:29:38Z","html_url":"https://github.com/r7kamura/diary/issues/5#issuecomment-1124440358","id":1124440358,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/5","node_id":"IC_kwDOHTcevs5DBZkm","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124440358/reactions"},"updated_at":"2022-05-12T01:29:38Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124440358","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"配信のカメラの角度を変えて、PCの画面が完全に映らないようにした。お互い気が散るため。","bodyHTML":"\u003cp\u003e配信のカメラの角度を変えて、PCの画面が完全に映らないようにした。お互い気が散るため。\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-12T06:12:07Z","html_url":"https://github.com/r7kamura/diary/issues/5#issuecomment-1124569416","id":1124569416,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/5","node_id":"IC_kwDOHTcevs5DB5FI","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124569416/reactions"},"updated_at":"2022-05-12T06:12:07Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124569416","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"rubocop_challengerはコードを読んでみたものの、怪しい箇所が多く、自作した方が良いような気もしてきた。","bodyHTML":"\u003cp\u003erubocop_challengerはコードを読んでみたものの、怪しい箇所が多く、自作した方が良いような気もしてきた。\u003c/p\u003e","author_association":"OWNER","created_at":"2022-05-12T06:48:47Z","html_url":"https://github.com/r7kamura/diary/issues/5#issuecomment-1124598446","id":1124598446,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/5","node_id":"IC_kwDOHTcevs5DCAKu","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124598446/reactions"},"updated_at":"2022-05-12T06:48:47Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124598446","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}},{"body":"チャプター情報が上手く書き出されていた。\r\n\r\n- [OBSでチャプター情報を自動で書き出す](https://r7kamura.com/articles/2022-05-11-obs-auto-chapter)\r\n- [作業 with r7kamura #12 - YouTube](https://www.youtube.com/watch?v=IFeJ3nFHPKI)","bodyHTML":"\u003cp\u003eチャプター情報が上手く書き出されていた。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://r7kamura.com/articles/2022-05-11-obs-auto-chapter\"\u003eOBSでチャプター情報を自動で書き出す\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=IFeJ3nFHPKI\"\u003e作業 with r7kamura #12 - YouTube\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","author_association":"OWNER","created_at":"2022-05-12T07:12:01Z","html_url":"https://github.com/r7kamura/diary/issues/5#issuecomment-1124615536","id":1124615536,"issue_url":"https://api.github.com/repos/r7kamura/diary/issues/5","node_id":"IC_kwDOHTcevs5DCEVw","performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124615536/reactions"},"updated_at":"2022-05-12T07:12:24Z","url":"https://api.github.com/repos/r7kamura/diary/issues/comments/1124615536","user":{"avatar_url":"https://avatars.githubusercontent.com/u/111689?v=4","events_url":"https://api.github.com/users/r7kamura/events{/privacy}","followers_url":"https://api.github.com/users/r7kamura/followers","following_url":"https://api.github.com/users/r7kamura/following{/other_user}","gists_url":"https://api.github.com/users/r7kamura/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/r7kamura","id":111689,"login":"r7kamura","node_id":"MDQ6VXNlcjExMTY4OQ==","organizations_url":"https://api.github.com/users/r7kamura/orgs","received_events_url":"https://api.github.com/users/r7kamura/received_events","repos_url":"https://api.github.com/users/r7kamura/repos","site_admin":false,"starred_url":"https://api.github.com/users/r7kamura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/r7kamura/subscriptions","type":"User","url":"https://api.github.com/users/r7kamura"}}]},"__N_SSG":true},"page":"/articles/[issueNumber]","query":{"issueNumber":"5"},"buildId":"dA1a87PnWXTIihFYGUYgy","assetPrefix":"/diary","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>