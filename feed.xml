<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[r7kamura/diary]]></title><description><![CDATA[r7kamura's daily working log.]]></description><link>https://r7kamura.github.io/diary/</link><generator>r7kamura/diary</generator><lastBuildDate>Sun, 29 May 2022 05:23:22 GMT</lastBuildDate><atom:link href="https://r7kamura.github.io/diary/feed.xml" rel="self" type="application/rss+xml"/><item><title><![CDATA[2022-05-28]]></title><description><![CDATA[r7kamura's working log on 2022-05-28]]></description><link>https://r7kamura.github.io/diary/articles/22</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/22</guid><pubDate>Fri, 27 May 2022 19:59:17 GMT</pubDate><content:encoded><![CDATA[<hr><p><a href="https://www.youtube.com/watch?v=1eI3HMxjMto&#x26;ab_channel=r7kamura">作業 with r7kamura #28 - YouTube</a></p><hr><p>懸垂 順手4回 逆手3回</p><hr><p>腕立て伏せ15回</p><hr><p>腕が終わりすぎてタンブラーを持ち上げるだけで苦労して笑っちゃった</p><hr><p>PowerToysには、最近VSCodeで開いたWorkspaceを検索する、という機能がある。</p>
<p><img src="https://user-images.githubusercontent.com/111689/170793391-06900aa6-7644-4e8f-8342-dc4b8c9813b6.png" alt="image"></p>
<p>これは一体どこからデータを取得しているのだろう、しかしソースコードが公開されているとはいえ、C#は読めねえ……と思っていたところ、StackOverflowでどこに保存されているか教えてくれている人がいた。</p>
<p><a href="https://stackoverflow.com/questions/54244342/list-vs-code-recent-workspaces-from-the-command-line">vscode settings - List VS Code recent workspaces from the command line - Stack Overflow</a></p>
<pre><code>C:\Users\&#x3C;USER>\AppData\Roaming\Code\User\workspaceStorage\*\workspace.json
</code></pre>
<p>という感じのパスにJSONで保存されているので、これを適当に漁れば良いらしい。もし検索結果から消したかったら、ここから消すと良いのだろうか。</p><hr><p>腹筋ローラー 10回</p><hr><p>フィルターのお手入れ表示が出ていたので、エアコンのフィルターの掃除をした。ダイキンの業務用のやつで、天井埋め込み型でラウンドフロー型 (4方向に風が出る) だったが、まあやることは簡単でボタンを2個同時に押してフタをだらんと開いた状態にし、あとは掃除機で埃を吸い込めばOK。しかしまあほぼ汚れていなかった。</p><hr><p>古いほうのAirPods Proをもしかしたら修理交換してもらえるかもしれない。ということで修理予約を入れた。</p>
<p>付けるときにキュイイッと甲高い異音がするし、2020年10月以前につくられた製品には異音問題があるらしく、この製品を購入したのは2020年12月で微妙なところ。</p><hr><p>twitter.comの各要素にアクセスする方法:</p>
<ul>
<li>j/kで移動している中で、選択中のアイテム
<ul>
<li>document.activeElement</li>
</ul>
</li>
<li>ツイート内の画像
<ul>
<li><code>img[alt="画像"]</code></li>
<li>locale設定に依存する</li>
</ul>
</li>
</ul><hr><p>作り始めた
<a href="https://github.com/r7kamura/twitter-shortcut-plus">r7kamura/twitter-shortcut-plus: Browser extension to add more keyboard shortcuts to twitter.com.</a></p><hr><p>今日の俗世:</p>
<ul>
<li>岸田トークン</li>
<li>資料修復技術でエロ本を蘇生</li>
</ul><hr><p>懸垂マシンでレッグレイズをやる方法を調べて、5回×3セットぐらい軽くやってみた。脚を伸ばすのは全然無理。とにかく身体を反らしてしまわないように気を付けたい。
<a href="https://www.youtube.com/watch?v=RuynaHvOv5Y&#x26;ab_channel=ShuichiToda%E6%88%B8%E7%94%B0%E7%A7%80%E4%B8%80">【筋トレ】腹筋だけを効果的に鍛えるレッグレイズのポイント - YouTube</a></p><hr><p>smile.amazon.comというドメインの存在を初めて知った。
<a href="https://github.com/r7kamura/amazon_url_shortener/issues/17">Feature request: Add in support for smile.amazon.com links · Issue #17 · r7kamura/amazon_url_shortener</a></p>]]></content:encoded></item><item><title><![CDATA[2022-05-27]]></title><description><![CDATA[r7kamura's working log on 2022-05-27]]></description><link>https://r7kamura.github.io/diary/articles/21</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/21</guid><pubDate>Thu, 26 May 2022 20:17:37 GMT</pubDate><content:encoded><![CDATA[<hr><p>今日の俗世:</p>
<ul>
<li>ゲーミング箸</li>
<li>壱百満天原サロメ</li>
</ul><hr><p><a href="https://www.youtube.com/watch?v=za9xTbJUzPQ&#x26;ab_channel=r7kamura">作業 with r7kamura #27 - YouTube</a></p><hr><p>他の人が映している自分のYouTubeの映像の写真を見てみると、自分でプレビューで見るよりかなり高画質で、プレビューとの乖離があることが分かる。</p><hr><p>作業配信環境に幾らかアップデートがあるたびに、作業配信環境をまとめる記事を新たに書こうとするが、少し書くたびに「そんなに需要無いな」と思ってゴミ箱に捨てている。</p><hr><p>rubocop-todo-correctorでPull Requestをつくったときに、pull_request event契機の他のworkflowも実行されてほしいが、デフォルトのGITHUB_TOKENを使っていると実行されない。</p>
<p>これは<a href="https://docs.github.com/en//actions/security-guides/automatic-token-authentication">Automatic token authentication - GitHub Docs</a>で説明されている。</p>
<blockquote>
<p>When you use the repository's GITHUB_TOKEN to perform tasks, events triggered by the GITHUB_TOKEN will not create a new workflow run. This prevents you from accidentally creating recursive workflow runs. For example, if a workflow run pushes code using the repository's GITHUB_TOKEN, a new workflow will not run even when the repository contains a workflow configured to run when push events occur.</p>
</blockquote>
<p>GitHub Appで組織ごとにaccess tokenを発行すると良さそうな雰囲気があるので、これが使えるか試してみたい。</p><hr><p>rubocop 1.30で、auto-correctがautocorrectに統一されたらしい。これにより、色々なものが壊れるようになった。驚いたのが、auto-correctの方を正規形とするのかと思いきや、autocorrectの方を正規形とするみたいだ。automobileみたいなものかね。</p>
<ul>
<li><a href="https://github.com/rubocop/rubocop/pull/10547">[Fix #10095] Change "auto-correct" to "autocorrect" by chris-hewitt · Pull Request #10547 · rubocop/rubocop</a></li>
</ul>
<p>rubocop-todo-correctorも壊れていたので対応した。</p><hr><p>懸垂マシンの配送状況が気になって調べたところ、昨日の昼時点で関西に居たらしい。</p><hr><ol>
<li>r7kamura名義でGitHub App Aをつくる</li>
<li>r7kamura/x にAをインストールする (実際の操作としては、Aをr7kamuraにインストールするときにxのみを選択)</li>
<li>r7kamura/x で <a href="https://github.com/tibdex/github-app-token">https://github.com/tibdex/github-app-token</a> を利用してアクセストークンを発行する</li>
</ol>
<p>という実験が成功。</p><hr><p>rubocop-todo-corrector custom actionで利用するアクセストークンについて、actions/checkoutではデフォルトのもの (github.token) を使い、gh pr createのときだけもしwithで指定されていたらそのアクセストークン、無ければデフォルトのアクセストークンを使う、というように変更すれば良いように思った。</p>
<p>つまり、アプリで発行するアクセストークンの権限について、</p>
<ul>
<li>pull requestのwrite</li>
<li>workflowのwrite</li>
</ul>
<p>のscopeだけあれば良くて、</p>
<ul>
<li>contentのwrite</li>
</ul>
<p>は不要そう?</p><hr><pre><code class="language-yaml">- run: echo "${{ inputs.access_token || github.token }}" | gh auth login --with-token
</code></pre>
<p>こんな感じ?</p><hr><p>作業配信で、YouTube Audio Libraryの曲を使ってみることにした。
探すのに一苦労だが……誰かが良さげな曲をまとめてくれたやつを参考に探している。</p><hr><p>Re: <a href="https://motemen.hatenablog.com/entry/2022/05/concentration-hacks">集中するためにやっていること2022 - 詩と創作・思索のひろば</a></p>
<blockquote>
<p>本来の話とは関係ないことを書き出しておき、横道にそれることを防ぐやり方</p>
</blockquote>
<blockquote>
<p>書き出す先が手元のアプリとかだと、そのままネットサーフィンなどしだすのでいけない</p>
</blockquote>
<p>自分も、思い付きは紙のノートに書き出して忘れるようにしている。</p>
<p>PCでやるとネットサーフィンなどしだすというのは確かに。複数の機能を持つデバイス (e.g. PC、スマホ) と比べて、単純な機能しか持たないデバイス (e.g. 紙の付箋、紙のノート) は、そういうところで利点がある。</p>
<p>寝る前にいま考えていることをノート等に書き出しておくとよく寝られる、という話をどこかで読んだ気がする。<a href="https://www.amazon.co.jp/dp/B07KWLFXX1">スゴい早起き</a> だったか。このこともあって、最近よく紙のノートに雑多なメモを書きがち。たまにノートをパラパラと読み返すのは面白い。</p><hr><p>workflow権限を持つGitHub Appベースで作成したアクセストークンを使ってrubocop-todo-correctorを動かし、自動的にPull RequestでGitHub Action (この場合はRuboCopによりLint; 分かりづらい) が動作する、という実験が成功した。</p>
<p><img src="https://user-images.githubusercontent.com/111689/170610432-7a17581e-6b67-46ed-8ed4-ba731d32d32d.png" alt="image"></p><hr><p>うちの炊飯器はジャスト50分間で炊きあがるので、作業時間開始直後に炊き始めないと、次の休憩時間に炊飯が間に合わない。</p><hr><p>Twitterのノイズを消す拡張、という切り口のものがあった。</p>
<ul>
<li><a href="https://chrome.google.com/webstore/detail/twitter-stress-reduction/ipnjgahnocpaefhffbnnjonihlihoeic?hl=ja">Twitter Stress Reduction - Chrome ウェブストア</a></li>
</ul>
<p>自作するなら、Twitterのおすすめを消す拡張、という切り口のものをつくるのが良いかもしれない。Twitterは要素に適当なクラス名が振られていないので、実装は結構大変そう。</p>
<p>他にまずまずユーザーがあるものとしてはこの辺:</p>
<ul>
<li><a href="https://chrome.google.com/webstore/detail/twitter%E3%81%AE%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88%E3%82%92%E7%84%A1%E5%8A%B9%E5%8C%96%E3%81%99/cebkmpjkademcaigilgldjonmphfbmfh?hl=ja">Twitterのキーボードショートカットを無効化するやつ - Chrome ウェブストア</a></li>
<li><a href="https://chrome.google.com/webstore/detail/twitter-media-downloader/cblpjenafgeohmnjknfhpdbdljfkndig">Twitter メディアダウンローダ - Chrome ウェブストア</a></li>
</ul>
<p>メディアダウンローダに10万人いるのはすごい。</p><hr><p>懸垂マシンを完成させた。1人でゆっくりやって2時間弱掛かった。</p>
<p>とりあえず逆手で5回、順手で3回やった (つーかこれが限界)。</p><hr><p><a href="https://www.youtube.com/clip/Ugkxy2NXpdlfZF0kT9s-MoCOrbB1wpWEryK9">✂️ 懸垂 - YouTube</a></p>]]></content:encoded></item><item><title><![CDATA[2022-05-26]]></title><description><![CDATA[r7kamura's working log on 2022-05-26]]></description><link>https://r7kamura.github.io/diary/articles/20</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/20</guid><pubDate>Wed, 25 May 2022 22:00:47 GMT</pubDate><content:encoded><![CDATA[<hr><p><a href="https://www.youtube.com/watch?v=sY_FBAw1y4g&#x26;ab_channel=r7kamura">作業 with r7kamura #26 - YouTube</a></p><hr><p>今日の俗世:</p>
<ul>
<li>4299万円回収</li>
<li>ワッカ ミーム化</li>
<li>ゆっくり茶番劇 登録抹消申請</li>
</ul><hr><p>TweetDeck Shortcut Plusが完成したので、Twitter Shortcut Plusもつくりたいと思っていたが、公式Twitterは自分が使っていないのであまりモチベーションが湧かない……</p><hr><p>腹筋ローラー 30回1セット</p>
<p>左の二の腕の外側らへんちょっと痛めたかも。</p><hr><p>屋外のベランダでほこりを被ってきたウッドデッキとチェアとデスクを掃除するのに、これはどうかという話
<a href="https://www.amazon.co.jp/dp/B00BYJV4CE">Amazon | 工進(KOSHIN) 蓄圧式 噴霧器 タンク 4L ミスターオート HS-401E 1段 ノズル 噴口 1個 防除 消毒 散布 | 噴霧器・アクセサリー</a></p><hr><p>デッキブラシは200円で捨てられるらしい。知らない自治体での話だが。
<a href="https://www.city.iga.lg.jp/faq/faq_detail.php?co=new&#x26;frmId=481#:~:text=%E5%BB%83%E6%A3%84%E7%89%A9%E5%AF%BE%E7%AD%96%E8%AA%B2%E3%81%8B%E3%82%89,%E3%81%A7%E3%81%AE%E5%8F%8E%E9%9B%86%E3%81%A8%E3%81%AA%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82">デッキブラシの捨て方【2019年1月更新】 | よくある質問 | 伊賀市</a></p><hr><p>これぐらいが丁度いい気がする。
<a href="https://www.amazon.co.jp/dp/B00IUES4U6">Amazon | 山崎産業 清掃用品 JP デッキブラシ180 CL673-000J-MB | 業務用デッキブラシ | 産業・研究開発用品 通販</a></p><hr><p><a href="https://automaton-media.com/articles/newsjp/20220526-204028/">光る「ゲーミング箸」販売開始。食事のおともの“箸”が、手元でビカビカに光る - AUTOMATON</a></p><hr><p>10000冊読書した人の本を読んだ。</p>
<p>本を選ぶときの話が良かった。読む前からある程度下調べをし、要約やレビュー、目次を読み、自分の目的を満たしてくれるものかどうか調べてから読む方が、その読書が成功する確率は著しく上昇する。逆に、場当たり的になんとなく気になったからと読んでも、成功する確率は低い。という話。</p>
<p>本からのアウトプットの話も良かった。本を読んだことによって何らかのアウトプット……自身の行動の変化、が成果として現れないのであれば、どれだけ本を読んでも意味が無い。よって、何らかの変化が生まれることが成功である。という話。</p>]]></content:encoded></item><item><title><![CDATA[2022-05-25]]></title><description><![CDATA[r7kamura's working log on 2022-05-25]]></description><link>https://r7kamura.github.io/diary/articles/19</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/19</guid><pubDate>Tue, 24 May 2022 20:53:06 GMT</pubDate><content:encoded><![CDATA[<hr><p><a href="https://www.youtube.com/watch?v=mwYwYjfSZ2o&#x26;ab_channel=r7kamura">作業 with r7kamura #25 - YouTube</a></p><hr><p>昨日書いた<a href="https://r7kamura.com/articles/2022-05-24-sustainable-rails">『Sustainable Web Development with Ruby on Rails』を読んだ</a>にそこそこ反響があった。</p><hr><p><a href="https://github.com/r7kamura/tweetdeck-shortcut-plus">https://github.com/r7kamura/tweetdeck-shortcut-plus</a> の0.1.0が審査に通っていたので、0.2.2を審査に出した。0.1.0は不具合があるため。</p><hr><p>買おうか迷ってウダウダしていたが、勢いで懸垂マシン (<a href="https://www.amazon.co.jp/dp/B09K3QQBKH">ST115</a>) を購入した。金曜～日曜に届くとのこと。</p><hr><p>伊之助のコスプレの腹筋ローラーの人 (<a href="https://twitter.com/InosukeWorkout">inosukeWorkout</a>)、1日目から膝コロ60回+立ちコロ10回とかやってた。</p><hr><p>今日の俗世</p>
<ul>
<li>冨樫義博 Twitterを開始</li>
<li>アメリカ 銃乱射事件</li>
</ul><hr><p>野菜の良いバイキングの店:</p>
<ul>
<li><a href="https://www.sizzler.jp/">sizzler | シズラー</a></li>
</ul><hr><p>いつも使っている乳液が切れたので、Amazonで同商品のおすすめ欄にいた同程度のレビューの謎の乳液を買った。</p><hr><p>腹筋ローラー 10回5セット</p><hr><p>"AppBrew Rails Best Practices" を書き終わった。そしてこのプラクティスに現状沿っていないところを直している……</p>]]></content:encoded></item><item><title><![CDATA[2022-05-24]]></title><description><![CDATA[r7kamura's working log on 2022-05-24]]></description><link>https://r7kamura.github.io/diary/articles/18</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/18</guid><pubDate>Mon, 23 May 2022 20:17:50 GMT</pubDate><content:encoded><![CDATA[<hr><p>今日の俗世:</p>
<ul>
<li>3500万円返金</li>
<li>イーロンマスク エルデの王へ</li>
<li>知床観光船事故 海底182m</li>
</ul><hr><p><a href="https://www.youtube.com/watch?v=X4sxEU3lFT8&#x26;ab_channel=r7kamura">作業 with r7kamura #24 - YouTube</a></p><hr><p>Sustainable Railsを読んでいく</p>
<h3>logrageはtest環境で使う</h3>
<p>development環境以外でlogrageを有効化している。test環境ではlograge有効化してほしくないな。production環境みたいな絶対に機械的しか見ないような場所では良いと思う。</p>
<h3>app以下にapp/models以外にドメインモデルの亜種を増やす</h3>
<p>ビジネスロジックを書くときはそれ専用の app/services みたいなディレクトリを使うらしい。自分はディレクトリを増やすことには反対で、すべてのビジネスロジック用クラスはドメインモデルの亜種だと思うので、app/models以下に定義した方が良いと考えている派。autoloaderの厄介事も増えて複雑になるし、ディレクトリが増えれば増えるほど命名規則がブレるようになるし。ActiveRecordにロジックを盛り込むかどうかという議論はまた別の話。</p>
<h3>ビジネスロジックを記述するクラスを細かく分ける</h3>
<p>ビジネスロジックを書くときにクラスを細かく分けろという話がある。これには賛成。なぜなら、人はプログラムの大まかな構造を理解するときに、クラス間の関係性に着目して理解することが多いから。よく参照されているクラスに不具合があると、確認しなければいけない可能性のあるクラスが増える……という例が示されている。構造や関係性を表明するための手段としてクラスを細かく分ける。</p>
<h3>常にresource-fulなroutingを使うべき</h3>
<p><code>resources :foos</code> と <code>get ...</code> とどっちを使うべきかという話について、後者を使うのは全くもって無益だとしている。そこまでか？でも、どちらにするかはともかく、どちらか片方に寄せるという姿勢は好ましいと思う。</p>
<h3>Don’t Create Custom Actions, Create More Resources</h3>
<p>"create more resources"という表現は良い。"コントローラーを分けた方がいい"、とするよりもこっちのほうが納得感が出るかも?</p>
<h3>Resources should never be nested more than 1 level deep</h3>
<p>という記述がガイドにあるのか。確かにこのルールが丁度良いと思う。</p>
<h3>Bet you didn’t think routing was such a deep topic!</h3>
<p>わかる。ルーティングは超大事な部分だが、かなり軽視されていてつらくなりがち。</p>
<h3>Ideally, Expose One Instance Variable Per Action</h3>
<p>可能なのか？そんなルールを掲げることが。
コントローラーからテンプレートにインスタンス変数で値を渡すという仕組みはひどい仕組みだとは思っているので、まああんまり多用しない方が良いよなという意味では賛成寄りではあるが、1個にしよう、とかあえて言うべきことなのだろうか。コントローラーでmemoizeしててヘルパーから透過的に触ってるやつ、とかもあるしなあ。</p>
<h3>Helpers are Best at Exposing Global UI State and Generating Markup</h3>
<p>ヘルパーは、Railsの提供するやつのようなグローバルなタイプのヘルパーとしては上手く働くという話。</p>
<h3>Just Use ERB</h3>
<p>そうだね。自分もERBの方が総合的には上手くいくと思っている。</p>
<p>テンプレートエンジンに関する話題で言うと、自分の中では、erbcopとslimcopの存在が大きくて、これが無いとテンプレートエンジン中のRubyコードに対してRuboCopで自動置換が出来ない。hamlcopもつくろうとしてみたんだけど、hamlパーサーを書くのが大変で実用段階には至らなかった (誰か完成させてほしい)。話を戻すと、RuboCopと親和性が最も高いということが、自分の中でERBを推す理由の一つになっている。</p>
<h3>Presenter</h3>
<p>Presenterの問題点:</p>
<ul>
<li>直接モデルにアクセスするか、Presenterを通してアクセスするか、2つの方法が生まれてしまう。2つの方法が生まれるとね3つめもどうせ生まれてしまう</li>
<li>Viewのコードを見ても、値がPresenterなのかただのModelなのか分からない</li>
</ul>
<p>…としていて、これには同意するところではあるが、でもそれってお前の言っているサービスクラスってやつについても言えるんじゃないか？</p>
<h3>変数の命名</h3>
<blockquote>
<p>I strongly recommend you name objects based on their actual class and do not pretend presenters are actually domain objects. For example, use @widget_presenter if the object is a WidgetPresenter, <a href="https://github.com/widget"><strong>@widget</strong></a> if it’s a Widget.</p>
</blockquote>
<p>それ。</p>
<p>ということはつまり、Foo::Barがあるとしたらbarという名前を使うべきという話だよな。ということは、Services::FooではなくServices::FooServiceとしなければならない。</p>
<p>あと個人的に名前について言いたいことがあるとすると、現代はエディタが十分にまともなので、名前は十分に長くても構わないと思う。英単語以上の省略は絶対にするべきではないし (例: eventをeとするなど)、widget_idをidとすべきでもない。</p>
<h3>テスト時間かかりすぎ問題</h3>
<blockquote>
<p>If tests are too brittle, duplicative, slow, or focused on the wrong things, the test suite will drag the team down.</p>
</blockquote>
<p>巷のRailsアプリは変なところにテスト書きすぎてて効率悪くなってる印象がある。ので引用した。悪いテストはチームの足を引っ張る。</p>
<blockquote>
<p>The strategy I recommend is to have a system test for every major user flow, use unit tests to get coverage of anything else that is important, and closely monitor production for failures.</p>
</blockquote>
<p>"major user flow" の例として、ログインページが良い例、FAQページが良くない例だと言っている。つまり全部ではなく、本当にコアなところにだけsystem-specを書くべき。じゃあ本当にコアなところって何やねんって言うと…? 特に深掘りされてなかった。</p>
<p>System Testについてもこう書けるよとしか紹介されてなくて、そのまま書き続けていくとマジで時間が掛かる遅いテストスイートが出来上がるぜ的なことは書かれていなかった。</p>
<h3>HTMLのテストの小技</h3>
<p>data-attributeにテストで検証する用の値 (IDとか) を埋め込んでおく小技が紹介されている。マジで小技だな…</p>
<h3>ビジネスロジック</h3>
<p>もしRailsというものが無くて、普通のRubyのコードだったらどうする? 普通にクラスを書いて、普通にメソッドを定義して、普通に呼び出すよね？ Railsであってもそうすべき、と言っている。</p>
<h3>サービスクラス</h3>
<pre><code class="language-ruby">FooCreator.new.create_foo(...)
</code></pre>
<p>と呼び出せるようなクラスが理想的だ、と言っている。</p>
<p>一方、自分は次のようなものが理想的だと思っている。</p>
<pre><code class="language-ruby">FooCreator.call(...)
</code></pre>
<p>本書的には、.call だと内部で一時的に状態を持ちたいときに使えなくて不便だと言っている。自分的には、それは内部実装次第で解決できることだと思っている。</p>
<pre><code class="language-ruby">class FooCreator
  class &#x3C;&#x3C; self
    def call(...)
      new(...).call
    end
  end

  def initialize(...)
    ...
  end

  def call
    ...
  end
end
</code></pre>
<p>また本書的には、本書のようにしないと2つ目のメソッドを足したくなったときに困り、引数を足すか別のクラスをつくらないといけなくて不便だと言っている。</p>
<blockquote>
<p>Further, the command pattern makes it difficult or impossible to add a second method on the service class if that should later make sense. For example, if there comes a need for a second widget creation process, by following the guidelines I’ve laid out, you could conceivably make a new method on WidgetsCreator and share any needed logic privately and internally. If you’ve used the command pattern, you either need to pass some behavior-modifying flags to the constructor or make a new class and figure out how to share needed logic publicly. This is a more complex result that the command pattern more or less forces you into.</p>
</blockquote>
<p>自分的には、これは引数を足すか別のクラスをつくるべきだと思う。もしここで同じクラスに複数のメソッドを足していくべきだと言うのなら、1つのControllerにいろいろなActionを定義すべきでないという話と矛盾すると思っている。</p>
<p>とはいえ、似ているが少し違うクラスが沢山あって好きに選んでくださいというパターンは、認知負荷が高まるとも思うので、一概に最高かというとそうでもないかもしれない。<a href="https://engineers.ntt.com/entry/2022/05/23/083118">ソフトウェア設計についてtwada技術顧問と話してみた 〜 A Philosophy of Software Design をベースに 〜 - NTT Communications Engineers' Blog</a> の話が少し関連している。</p>
<p>齟齬があるかもしれないが、本書は大クラス主義を推している一方、Railsのコントローラーについてだけは小クラス主義を推している、というところに矛盾を感じるのだろうか。そして、自分はサービスクラスについては小クラス主義を推している一方で、ActiveRecord::Baseを継承するようなモデルクラスでは「別に必要ならメソッド足しまくればええやん」ということを思っていて、矛盾している。こういう反論したい意見が出てきてこそ、読む価値のある本と言える。</p>
<blockquote>
<p>Validations Are Awesome For User Experience</p>
</blockquote>
<p>Validationはデータの整合性を完璧に保つものではないから、UXのために使うべきだよとまとめている。いいまとめ方。ActiveRecordでのvalidationって、フロントエンドでのエラーチェックに似てるところがあるよね。</p>
<blockquote>
<p>How to (Barely) Use Callbacks</p>
</blockquote>
<p>あんまり使うなと言っている。あるあるですな。自分の話だけど、既にコールバックが多用されてるRailsアプリから、コールバックを引き剥がしたいという要求が開発者から挙がるのを、10社ぐらいで見ている気がする。</p>
<blockquote>
<p>Scopes are Often Business Logic and Belong Elsewhere</p>
</blockquote>
<p>3回書いたらscope化しろと言っている。ただあまり考察はなされていなくて、「普通にスコープをつくることもできるし、サービスクラスをつくってそこでスコープ的なこともできるよね。まあいろんなところで何度も使われるスコープっていうのはビジネスロジック色は薄くてデータ操作的だと言えるから、これはスコープで良いんじゃないか」と言っている。そういう温度感で良いのか？</p>
<blockquote>
<p>Don’t Over-use Callbacks</p>
</blockquote>
<p>Railsのscaffoldが生成する <code>before_action :set_article</code> のようなcallbackが批判されていて、それはそのアクションの主たる部分だからアクションの中に置くべきだと言っている。これは自分的にも賛成。
一方で、巷のRailsアプリだとbefore_actionで書いてほしいようなものをアクション内に記述していて分かりづらい (しアクション本体で処理を中断してレスポンスを返すとその事実がログに残らないのでデバッグしづらい) という問題があったりもするので、Don't Over-useと喧伝するのもどうかなと思う。本文中でもそう言っているけど、気を付けながら使おう、ぐらいの見出しが丁度良いと思う。</p>
<blockquote>
<p>Queue Jobs Directly, and Have Them Defer to Your Business Logic Code</p>
</blockquote>
<p>ActiveJobを使うと引数のシリアライズとかで悩まされるから、それは避けてSidekiqとかのAPIを直接叩けとのこと。マジか。何か過去にジョブ周りでミスって重大な損失を被った悲しい経験があるのか……?</p>
<blockquote>
<p>Rake Tasks Should Not Contain Business Logic</p>
</blockquote>
<p>コントローラーやジョブと同じように、Rakeタスクもビジネスロジックを含めないべき (サービスクラスを呼ぶなどしろ) としている。これには同意。直接ビジネスロジックが書かれているRakeタスクとかどうせテストも禄にされてないしな。</p><hr><p>A Philosophy of Software Designは読んでみたいところ。</p><hr><p>Sustainable Web Development with Ruby on Railsを読み終えた。後半はなんかこう言及すべきトピックがあまり無かったのでざーっと読み流した。</p><hr><p>同作者のもの:</p>
<ul>
<li><a href="https://brutalist-web.design/">Brutalist Web Design</a></li>
<li><a href="https://gigazine.net/news/20180710-brutalist-web-design/">ウェブデザインの本質に主眼を置いたデザインガイドライン「ブルータリスト・ウェブ・デザイン」 - GIGAZINE</a></li>
</ul><hr><p>書いた: <a href="https://r7kamura.com/articles/2022-05-24-sustainable-rails">『Sustainable Web Development with Ruby on Rails』を読んだ</a></p><hr><p>腹筋ローラー 10回3セット</p>]]></content:encoded></item><item><title><![CDATA[2022-05-23]]></title><description><![CDATA[r7kamura's working log on 2022-05-23]]></description><link>https://r7kamura.github.io/diary/articles/17</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/17</guid><pubDate>Sun, 22 May 2022 22:36:54 GMT</pubDate><content:encoded><![CDATA[<hr><p><a href="https://www.youtube.com/watch?v=KtfRmyQIrAE&#x26;ab_channel=r7kamura">作業 with r7kamura #23 - YouTube</a></p><hr><p>OBSのVLCメディアソースで、プレイリストファイルではなくディレクトリから選べることを知った。これで、プレイリストをつくらなくてもディレクトリに楽曲を放り込んでおけばOKな状態になった。早速既存のプレイリストは削除して、ディレクトリで指定するように変更した。どの辺がVLCに関係しているのかいまいち謎だが。内部的にVLCを通して音声ファイルを扱っているのかな。</p><hr><p>昨日の作業ではTailwindを初めて利用できて良かった。</p>
<p>CSSは、次のいずれかの手段が現状の最適解だと思っているので、後者のパターンで採用する際の存在としてTailwindは優秀な選択肢。</p>
<ul>
<li>全部自分で書く</li>
<li>何も書かない</li>
</ul>
<p>デザインセンス無しで活用できるものでは決してないとは思うけれど、変なことはできないようになっているはずなので、普通にCSSを書く場合と比べると、良いものが出来やすいようにはなっていると思う。</p><hr><p>この前ReactのuseEffectを利用したが、以前と比べて、つまりclass componentでcomponentDidMount等を利用して同等の機能を実現していた場合と比べて、関数の名前がやっていることを特に表していないので本当に分かりづらいという部分が気になった。クラスを使わずに実現するという方針は良いが、名前の付け方が悪くて、別の点で使いづらく、勿体ない。</p><hr><p>鳴らしている雨の音が2秒間ぐらいの無音から開始するせいで、ループ時に途切れるような感覚になることがあった。Window 10標準の方法でmp3のトリミングを行う方法は無さそうだったので (mp4ならフォトアプリがあったのだが)、Audacityを入れて編集した。これで配信時の雨の音が改善された。</p><hr><blockquote>
<p>OBSのVLCメディアソースで、プレイリストファイルではなくディレクトリから選べることを知った。これで、プレイリストをつくらなくてもディレクトリに楽曲を放り込んでおけばOKな状態になった。早速既存のプレイリストは削除して、ディレクトリで指定するように変更した。どの辺がVLCに関係しているのかいまいち謎だが。内部的にVLCを通して音声ファイルを扱っているのかな。</p>
</blockquote>
<p>ディレクトリだとループ再生とシャッフル再生の機能が利用できないらしい。敗北。</p><hr><p>これをChromeウェブストアに申請した。
<a href="https://github.com/r7kamura/tweetdeck-shortcut-plus">r7kamura/tweetdeck-shortcut-plus: Browser extension to add more keyboard shortcuts to TweetDeck.</a></p><hr><p>申請後にいろいろ不具合が見つかって修正した。一度に複数のバージョンを申請できないので、反応後に次のバージョンを申請しないといけない。</p><hr><p><a href="https://sustainable-rails.com/">Sustainable Web Development with Ruby on Rails</a> を読み始めた。</p>
<p>『Railsで持続可能なウェブ開発を』というような題名。ここで言う持続可能というのは、</p>
<ul>
<li>仕様への要求が増えても</li>
<li>リソースへの要求が増えても</li>
<li>開発者が増えても</li>
</ul>
<p>耐えられるような、という意味だろう。</p><hr><p><img src="https://user-images.githubusercontent.com/111689/169749521-2bbbe4a0-ebdf-43a1-b90d-431cb6e1b57d.png" alt="image"></p>
<p>コードを入れるとほぼ半額 (6500円から3000円ぐらい?) になる。</p><hr><p>作業配信は15:00に終了する、とするのが丁度良いように思った。次回も15:00の終了を狙いたい。</p><hr><p>腹筋ローラー 10回2セット</p>]]></content:encoded></item><item><title><![CDATA[2022-05-22]]></title><description><![CDATA[r7kamura's working log on 2022-05-22]]></description><link>https://r7kamura.github.io/diary/articles/16</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/16</guid><pubDate>Sat, 21 May 2022 20:50:59 GMT</pubDate><content:encoded><![CDATA[<hr><p>actions/setup-nodeの <code>cache: npm</code> ってnode_modulesのキャッシュを作るわけじゃないのか。自分も勘違いしていた。
<a href="https://github.com/actions/setup-node/pull/468">Adjust caching documentation by dmitry-shibanov · Pull Request #468 · actions/setup-node</a></p><hr><p>作業配信する。
<a href="https://www.youtube.com/watch?v=27CmW1_rzAk&#x26;ab_channel=r7kamura">作業 with r7kamura #22 - YouTube</a></p><hr><p>tweetdeck shortcut plusを作り終えたら、転用してtwitter shortcut plusもつくりたい</p><hr><p>昨日から若干風邪気味。喉が若干痛いのと、鼻水が若干出る</p><hr><p><a href="https://r7kamura.github.io/diary/">r7kamura/diary</a>のフッター部分に、RSSとGitHubリポジトリへのリンクを足した。
Feedlyで見てみたらこのRSSに7人の購読者が居た。</p><hr><p>書いた: <a href="https://r7kamura.com/articles/2022-05-21-atomic-habits">Atomic Habitsを読んだ</a></p><hr><p><img src="https://user-images.githubusercontent.com/111689/169671335-28e27122-2427-42be-964f-1aacd3ffe025.png" alt="image"></p>
<p>TweetDeck Shortcut Plusの管理画面をつくっている。</p><hr><p><a href="https://tailwindcss.com/">Tailwind CSS - Rapidly build modern websites without ever leaving your HTML.</a>を学び始めた。</p><hr><p><img src="https://user-images.githubusercontent.com/111689/169674779-686caa4b-6eac-4652-9f3d-2d5234d9525a.png" alt="image"></p><hr><p>本日の俗世:</p>
<ul>
<li>ダミアニャ</li>
<li>大谷翔平</li>
<li>MusicUnity2022</li>
</ul><hr><p>OBSで、VLCソースのときのデフォルトが非表示時に停止だったが、非表示時に一時停止にしないと、上手くいかないことが分かった。</p><hr><p>第20回のスパム判定はその翌日には解除されていて、自分で公開化できるようになったので操作しておいた。何だったのか。</p><hr><p>昨日の配信でtunetankのBGM利用を試した。1日経っても著作権の申し立てが来なかったので、成功だと言える。いいサービスだと思う。ただ、使うサービスは少ない方が良いし万人が真似しやすい手法の方が良いと考えているので、将来的にはYouTube Audio Libraryの適当な音楽を見繕って移行したいところ。見繕うコストがかなり高いので、それが今のYouTube Audio Libraryの問題。</p><hr><p>YouTubeで保存されるアーカイブの最大時間は12時間だと聞いたことがある。では、12時間以上配信した場合に、アーカイブは12時間分残るのか、それとも何も残らないのか。実験してみるにはリスクが高すぎる。</p>
<p><a href="https://youtu.be/TKepOSUGP1E?t=31454">地獄の1500個、梱包する - YouTube</a> (再生時間付きのリンク) という動画にて 、次の発言を聞いた。</p>
<p>「"今日のアーカイブ残る？" ……あのね、12時間以内に一旦終了するっていう作業がしっかり達成できれば残る。万が一、超えちゃったら残んない。視聴者次第。視聴者が僕に伝えられるかどうかってとこ」</p>
<p>ということで、配信時間が12時間を超えたらアーカイブ動画は1秒も残らない、という可能性が高まった。</p>
<p>この機会に色々調べてみると、今は確かにそうらしい。</p>
<ul>
<li><a href="https://support.google.com/youtube/answer/6247592?hl=ja">ライブ配信のアーカイブ - YouTube ヘルプ</a></li>
</ul>
<p>昔は12時間分残っていた時代もあったらしい。今は残らない。これが情報が錯綜していてる原因でもある。</p><hr><p><img src="https://user-images.githubusercontent.com/111689/169685128-ed3b6f48-8315-4664-9f5a-4864cab8fcd4.png" alt="image"></p>
<p>₍₍ (ง ˙ω˙)ว ⁾⁾</p>
<p><img src="https://user-images.githubusercontent.com/111689/169684247-5a2e7efd-41ca-4061-b733-ef986adde2ce.JPG" alt="IMG_6615"></p>
<p>₍₍ (ง ˙؎˙ )ว ⁾⁾</p>
<p><img src="https://user-images.githubusercontent.com/111689/169684245-fc29ae6b-3e76-41d6-9162-49c14b18531c.JPG" alt="IMG_6616"></p>
<p>⁽◝(ˊ꒳ˋ )◜⁾⁾</p>
<p><img src="https://user-images.githubusercontent.com/111689/169684631-1dcfb889-1c37-45e7-96a0-7b3002c4eb5e.JPG" alt="IMG_6619"></p>
<ul>
<li><a href="https://www.youtube.com/watch?v=js6Sqpk-4dg&#x26;ab_channel=%E6%96%99%E7%90%86%E7%A0%94%E7%A9%B6%E5%AE%B6%E3%83%AA%E3%83%A5%E3%82%A6%E3%82%B8%E3%81%AE%E3%83%90%E3%82%BA%E3%83%AC%E3%82%B7%E3%83%94">1皿48円で出来るガチでウマい最強のズボラ飯【虚無ペペロンチーノ】 - YouTube</a></li>
<li><a href="https://github.com/r7kamura/cooking/blob/5dd26d6f93bb9cf1efc94624f67fcfa68d940c17/peperoncino.md">cooking/peperoncino.md at main · r7kamura/cooking</a></li>
</ul><hr><p>manifest v3で、Chrome拡張のアイコンがクリックされたときにオプションページを開くコード。</p>
<pre><code class="language-javascript">// background.js
chrome.action.onClicked.addListener(() => {
  chrome.runtime.openOptionsPage();
});
</code></pre>
<p>Chrome拡張のアイコンがクリックされたときにオプションページを開くコード。</p>
<pre><code class="language-diff">- chrome.browserAction.onClicked.addListener(() => {
+ chrome.action.onClicked.addListener(() => {
</code></pre>
<p>manifest v2時代は <code>browserAction</code> だった。</p><hr><p>腹筋ローラー 10回1セット</p>]]></content:encoded></item><item><title><![CDATA[2022-05-21]]></title><description><![CDATA[r7kamura's working log on 2022-05-21]]></description><link>https://r7kamura.github.io/diary/articles/15</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/15</guid><pubDate>Fri, 20 May 2022 22:23:57 GMT</pubDate><content:encoded><![CDATA[<hr><p>作業配信をする。
<a href="https://www.youtube.com/watch?v=_dUaejy3P7Y&#x26;ab_channel=r7kamura">作業 with r7kamura #21 - YouTube</a></p><hr><p>今日は利用するBGMを tunetank.com に変えるという改善を加えた。勿論有料で契約しているので、YouTubeにアーカイブ動画がSpam判定されないことを願う。</p><hr><p>知らなかったキーボードショートカットも含めてほとんどのものが記載されているっぽいので、一度読み直した。
<a href="https://support.google.com/chrome/answer/157179?hl=ja&#x26;co=GENIE.Platform%3DDesktop">Chrome のキーボード ショートカット - パソコン - Google Chrome ヘルプ</a></p><hr><p>コア機能は大体できた。ショートカット管理画面をつくる必要があって大変そう。
<a href="https://github.com/r7kamura/tweetdeck-shortcut-plus">r7kamura/tweetdeck-shortcut-plus: Browser extension to add more keyboard shortcuts on TweetDeck.</a></p><hr><p>デスクトップPCのOS利用割合 Win 75%, Mac 15%
<a href="https://gs.statcounter.com/os-market-share/desktop/worldwide">Desktop Operating System Market Share Worldwide | Statcounter Global Stats</a></p><hr><p>GitHubがMarkdownの引用に新しい記法を追加しようとしているという話:
<a href="https://github.com/github/feedback/discussions/16925">[Markdown] An option to highlight a "Note" and "Warning" using blockquote (Beta) · Discussion #16925 · github/feedback</a></p><hr><p>Atomic Habitsを読み終えた。平凡な時間管理の話が紹介されるのかと思いきや、あらゆる観点について真面目に考えているという本で、印象が良かった。また、普段は人が説明してくれないような生活のあらゆることについて説明してくれて、そうそう、そういう話が知りたかったんだよね、と思いところが何度もあった。その話はいい話だからあと100mぐらい深掘りしてほしいのにな～と思うことが多かった。</p>
<p>Kindle版も購入してAudible版と併用しようとしたものの、結局はKindle版で1時間、Audibleで9時間ぐらいの割合で読んだので、Kindle版は必要なかった。等速で聞いていたものの、1.25倍ぐらいで聞いても良かったかも。</p>
<p>冒頭の「はじめに」の事故のエピソード以外はほぼ全部読んで良かった内容だった。冒頭の事故のエピソードは本当に最悪で、怖い事故が紹介されてただ怖いだけなので無い方がいい。そこから奇跡的に回復して上手くいった話として構成されているが、この最初の部分だけは本当に読まなくて良い。かなりいい本なのに、普通の人は冒頭から読むはずなので、ここで読者を失うのは勿体ない。いい本だが、この冒頭のせいで他人にも勧めづらい。言うほどか？という話ではあるのだけど、それ以外の良さのせいでこの部分の悪さが浮き彫りになっている。</p><hr><p>TweetDeckでやりたいこと全部キーボードでできるのすごい。腕がもう1本生えたような感覚。</p>]]></content:encoded></item><item><title><![CDATA[2022-05-20]]></title><description><![CDATA[r7kamura's working log on 2022-05-20]]></description><link>https://r7kamura.github.io/diary/articles/14</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/14</guid><pubDate>Thu, 19 May 2022 19:33:45 GMT</pubDate><content:encoded><![CDATA[<p>.</p><hr><p><a href="https://chrome.google.com/webstore/detail/copy-markdown-link/gkceaaphhbeanfciglgpffnncfpipjpa">Copy Markdown Link.</a>がChromeウェブストアで公開された。</p><hr><p>Copy Markdown Linkを紹介する旨の記事を一応書いた。よくあるものなので大したことは無いものの、一応。</p><hr><p><a href="https://github.com/antfu/vitesse-webext">https://github.com/antfu/vitesse-webext</a> というブラウザ拡張向けテンプレートリポジトリを試してみて、確かに動いたが、色々入りまくっててよく分からん (ちゃんと読んでないだけ) という気持ちになったので、やはり自前で小さいテンプレートリポジトリを持つか……という気持ちを新たにした。しかしまあ優れてそうなところは沢山あって、</p>
<ul>
<li>ESLint対応</li>
<li>他ブラウザ対応</li>
<li>content-script対応</li>
<li>その他よく知らないけど色々やってくれるはず</li>
</ul>
<p>という違いはありそう。</p><hr><p>ブログ記事を書いてからすぐ配信するのではなく定時バッチ (日本時間午前4時) でのビルドにのみ頼るようにした結果、なんというか気持ちに余裕が出てきたような気がしなくもない。がすぐ公開された方がアドだろみたいな気持ちもあり、これは判断が難しいところ。すぐ公開されて反応を気にしすぎてしまうというデメリット、手軽に文章を書いて雑に投稿できるというメリットをどう評価するかという話。</p><hr><p>書いた: <a href="https://r7kamura.com/articles/2022-05-20-copy-markdown-link">Copy Markdown Link</a></p><hr><p>書いた: <a href="https://r7kamura.com/articles/2022-05-20-image-caption">画像のキャプション復活</a></p><hr><p>結局、</p>
<pre><code>gh workflow run import --repo r7kamura/r7kamura.com
</code></pre>
<p>とか叩いて更新を試みてしまっていて、全く意味がない。</p><hr><p><a href="https://www.youtube.com/watch?v=IXwOcXgY3WM&#x26;ab_channel=r7kamura">作業 with r7kamura #20 - YouTube</a></p><hr><p><a href="https://github.com/r7kamura/diary/issues/14">#14</a> だけIssue作成時にIssueイベントが発行されておらず、Issueのデータが同期されていなかった。発行されないこともあるのだな</p><hr><p>馬がメールを自動返信してくれるサービス、良すぎる
<a href="https://www.youtube.com/watch?v=kbfD_lX1Tog&#x26;ab_channel=InspiredbyIceland">OutHorse Your Email to Iceland’s Horses - YouTube</a></p>
<p><img src="https://user-images.githubusercontent.com/111689/169418733-4e277647-641b-478c-aa67-69f4c4117ea1.png" alt="image"></p><hr><p>Rails 6.1 (7.0かも?) から、使い方次第ではpeform_enqueued_jobsを使っているコードを書き換えないといけなくなった。</p>
<pre><code class="language-ruby"># NG (Rails 6.1未満ではOK)
expect {
  perform_enqueued_jobs { subject }
}.to raise_error(X)

# OK
perform_enqueued_jobs {
  expect { subject }.to raise_error(X)
}
</code></pre>
<ul>
<li><a href="https://github.com/rails/rails/issues/41290">perform_enqueued_jobs does not return the type of error raised in the job · Issue #41290 · rails/rails</a></li>
</ul><hr><p>VSCodeのdevcontainerの機能を使ってみることにした。</p>
<p>Node.jsのイメージを使うようにDockerfileを置く。コマンドパレットでReopen container的なやつを実行すると、.devcontainer/devcontainer.json が自動生成された。この状態でVSCodeでターミナルを開くと、そのDockerfileで開かれるようになった。node:18には偶然Gitもインストールされていたので助かった。</p>
<p>しかし普段使っている環境とはdotfilesも異なるしなんだか居心地が悪い。そう思って調べていたら、VSCodeの設定でお前のdotfilesのリポジトリのURLを入力すれば勝手にインストールしてやるよという機能が存在することが分かった。ただ、これを使うにはリポジトリのルートに install.sh みたいなファイルが無いといけないということで、雑にそれをこしらえた。</p>
<p><a href="https://github.com/r7kamura/dotfiles">https://github.com/r7kamura/dotfiles</a></p>
<p>install.shの内容はこれだけ</p>
<pre><code class="language-bash">#!/bin/bash
set -euo pipefail

ln -fs ~/dotfiles/.bashrc ~/.bashrc
</code></pre>
<p>URLを設定後、そのままでは特に何も反映されなかったが、VSCodeのworkspaceを一度開き直すことで無事設定が反映され、いつものような環境で開発できるようになった。</p>
<p><img src="https://user-images.githubusercontent.com/111689/169434352-587f4ea9-680b-4e78-bd4c-799348f95710.png" alt="image"></p><hr><p>devcontainerからgit pushしようとするとプロセスから音沙汰がなくなりworkspaceを閉じるしかなくなる、という問題に遭遇したので一時撤退することにした。</p><hr><p>つくりはじめた: <a href="https://github.com/r7kamura/tweetdeck-shortcut-plus">r7kamura/tweetdeck-shortcut-plus: Browser extension to add more keyboard shortcuts on TweetDeck.</a></p><hr><p>今日の俗世:</p>
<ul>
<li>デス鮭ハンター</li>
<li>4630万円誤送金 男 逮捕</li>
<li>首相 痛恨ミス 正解は5階</li>
</ul><hr><p>腹筋ローラーが届いたので、膝ついて10回だけやった。</p><hr><p>朝から鼻水が出るし喉も痛かったので、少し風邪気味かもしれない。最近銭湯によく行っていたせいか？</p><hr><p>YouTubeからあなたの投稿した動画はスパムであると警告がきて直近の動画が非公開化された。調べてみると、この件に関しては再審査する余地もなく、またサポートも受けられないらしい。何が原因かが分からないが、90日以内にあと2回警告を受けるとチャンネルが停止されるという記載があったので (スパムの場合は1回で停止だという説明も見かけたが、今回停止されていないことから、どうやら常にそうではないらしい)、何が原因か確かめるために実験できる機会は残り2度だけらしい。この実験に2度失敗するとチャンネルが停止される。</p>
<p>問題の原因について、著作権フリーの楽曲を再生していることだと推測している。これに賭けて、次回は配信中に楽曲を再生しないことを試して、その後その動画が非公開化されないかどうかをもって、成否を確かめることにしようか考えている。</p><hr><p><a href="https://zenn.dev/takahashim/articles/ab48aaedab1e68">『Sustainable Web Development with Ruby on Rails』はRails使ってるなら絶対面白いと思う</a> が面白そうだった。</p><hr><p>以前からYouTubeの配信で使うための音楽を有料で使わせてくれるサービスが無いか探していて、 <a href="https://tunetank.com/">https://tunetank.com/</a> が良さそうだったので使ってみることにした。</p>]]></content:encoded></item><item><title><![CDATA[2022-05-19]]></title><description><![CDATA[r7kamura's working log on 2022-05-19]]></description><link>https://r7kamura.github.io/diary/articles/13</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/13</guid><pubDate>Wed, 18 May 2022 19:28:17 GMT</pubDate><content:encoded><![CDATA[<hr><p>書いた。報告的で、情報量はあまり無い
"<a href="https://r7kamura.com/articles/2022-05-18-amazon-url-shortener-update">Amazon URL Shortenerの改善</a>" <a href="https://r7kamura.com/articles/2022-05-18-amazon-url-shortener-update">https://r7kamura.com/articles/2022-05-18-amazon-url-shortener-update</a></p><hr><p>作業配信する。
<a href="https://www.youtube.com/watch?v=Svr4JEjy5MQ&#x26;ab_channel=r7kamura">作業 with r7kamura #19 - YouTube</a></p><hr><p>これのウェブストアへの申請をやる。
<a href="https://github.com/r7kamura/copy-markdown-link">r7kamura/copy-markdown-link: Browser extension to copy link in Markdown format.</a></p><hr><p>ウェブストアへ申請した。</p><hr><p>"AppBrew Rails Guides" という文書を書いている。</p><hr><p>見た。
<a href="https://www.youtube.com/watch?v=T5diZPGOLhk&#x26;ab_channel=%E3%83%9D%E3%82%B1%E3%83%A2%E3%83%B3%E5%85%AC%E5%BC%8FYouTube%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%AB">【公式】オリジナルアニメ「雪ほどきし二藍」第一話 青き踏む |『Pokémon LEGENDS アルセウス』 - YouTube</a></p><hr><p>毎月「久しぶりに釘宮理恵の声聴いた」と言っている気がする</p><hr><p>TweetDeckに追加したいショートカットキー</p>
<ul>
<li>選択中の投稿に含まれている画像を大きなサイズで表示する
<ul>
<li>前後の画像に移動する</li>
<li>連続投稿の漫画である場合を考慮して、次の投稿があればその画像にそのまま遷移できると便利そう</li>
</ul>
</li>
<li>その投稿をリツイートしたユーザーのカラムを新しく開く</li>
<li>そのカラムを閉じる</li>
<li>その投稿が引用している投稿を開く</li>
<li>その投稿に含まれている最初のURLを開く</li>
<li>その投稿をtwitter.comで開く</li>
<li>その投稿のlikesを開く</li>
<li>その投稿のretweetsを開く</li>
</ul><hr><p>選択中の投稿には <code>is-selected-tweet</code> というクラス名が付くようだから、これを見てどうにかするJavaScriptを実行する拡張をつくれば良さそうではある。</p><hr><p>Chrome拡張の雛形を提供する手段として、例えば次の方法が考えられる</p>
<ul>
<li><code>npm init foo</code> できるような <code>create-foo</code> NPM packageをつくる</li>
<li><code>foo-starter-kit</code> のようなテンプレートリポジトリをつくる</li>
</ul>
<p>テンプレートリポジトリの優位性は、NPMを動かす実行環境が無くても雛形を用意できること。Dockerfileとかを提供すれば、Node.jsを直接インストールさせることなく利用してもらえる。動的なコンテンツも、自己書き換えを行うGitHub Actionという飛び道具を使えば実現できないこともないが、何かを入力してもらうということはできない。</p>
<p>NPM packageの優位性は、動的にコンテンツを入力する能力があることで、例えばcreate-viteだとTypeScriptを使うかどうか、Reactを使うかどうかなどが選択できるし、packageのdescriptionやnameを入力してもらったりできる。downsideとして、やはりNode.jsを入れてもらわないといけないということがある。</p><hr><p>今日の俗世:</p>
<ul>
<li>三角関数 金融</li>
<li>ゆっくり茶番劇 商標登録取消</li>
<li>4630万円誤送金</li>
</ul><hr><p>Google Docsで代替テキスト (Ctrl + Shift + Y) から「題名」を付けることで、画像のtitle属性が付けられることが分かり、これでブログに表示する画像にキャプションを付けたりできるのだけど、一方でGoogle Docs側で編集しているときにその画像に代替テキストが割り当てられているかどうかという情報が一切分からない。代替テキストの利用には編集上の問題がある。</p><hr><p>Atomic Habits、後半のほうに (20章ぐらい?)、理論上すべての物事に対して楽しんで取り組める可能性があるが、人より楽しめるものを選択した方が、人から褒められたり感謝されたりしてより楽しみやすく、継続もしやすい、という基本的なことが書かれていて良かった。</p>
<p>それから、探索と試行 (試行という語彙だったかは曖昧) をどういう割合でやると良いかという基本的な事柄にも触れられていて良かった。上手くいっている状況では試行を重視し、上手くいっていない状況では探索を重視する、というのが基本原則。また上手くいっている状態でも10-20%程度は探索に回せ的な話もあった。ちなみに、Googleの20%ルールという卑近で分かりやすい例が紹介されていた。</p><hr><p>AppBrew Rails Guidesは、AppBrew Rails Best Practicesにリネームして、かつ汎用性を持たせて一般公開できる形に留めることにした。これだとAppBrew固有の話ができなくなるが、そもそもAppBrew固有の話をすべきではないというか、一般的にそれはNG (だから例えばAppBrewのXが良くてYが悪いことは明らかだよね) という風に暗に伝える方が効果的であると考えたため。</p>
<p>形式としては、X Best Practicesは1 sectionあたり1 title, 1~2 sentences + NG example + OK exampleの形式を取ることが多そうだったので、その形式を取ることにした。</p><hr><p>WindowsのChromeで、Alt+Shift+Tで更新ボタンのところにフォーカスでき、またそこからTabで移動すると拡張のあたりのアイコンにキーボードでフォーカスできるということを知った。</p>]]></content:encoded></item><item><title><![CDATA[2022-05-18]]></title><description><![CDATA[r7kamura's working log on 2022-05-18]]></description><link>https://r7kamura.github.io/diary/articles/12</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/12</guid><pubDate>Tue, 17 May 2022 20:04:14 GMT</pubDate><content:encoded><![CDATA[<hr><p>作業配信をする。</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=lWDTGvYLbz4&#x26;ab_channel=r7kamura">作業 with r7kamura #18 - YouTube</a></li>
</ul><hr><p>Copy Markdown LinkというChrome拡張が欲しくなってきた。Copy Rich Linkと同じように、コピー時にポップアップが出るやつ。似たようなものは無数にあるが、ポップアップが鬱陶しかったりする。ストアに出すかどうかはともかく、少なくとも自前で読み込んで使いたい</p><hr><p>google-docs-to-markdownで、exportするたびにGoogleから発行される画像のURLが変わるので、毎回差分が出てしまうという問題がある。最終変更日時を比較して変更が無ければExportしない、というのを実装すれば解決できる。ただ、差分が出たからといっても「大変そう」ぐらいしかデメリットが感じられないので、今のところモチベーションが湧かない。</p>
<ul>
<li><a href="https://github.com/r7kamura/google-docs-to-markdown">https://github.com/r7kamura/google-docs-to-markdown</a></li>
</ul><hr><p>YARDで知らないタグ <code>@safe</code> をパースしたときに警告が出てしまって、rubocop_todo_correctorでタイトルにその警告が含まれてしまうという問題を確認した。警告を出ないようにするか、警告が出ても問題ないようにするか、どちらかの対応をしたい。</p><hr><p>Chrome拡張をつくりはじめた。</p>
<ul>
<li><a href="https://github.com/r7kamura/copy-markdown-link">https://github.com/r7kamura/copy-markdown-link</a></li>
</ul><hr><p><img src="https://user-images.githubusercontent.com/111689/168911799-3c496cd1-90aa-4931-8e66-7139131df5f5.png" alt="image"></p>
<p>前日分の作業ログのRSSがFeedlyから流れてきた。</p><hr><p>Chrome extensionのpermissionsって、<code>chrome</code> にアクセスするのに必要というだけの簡単な覚え方はできなくて、<code>document.execCommand("copy")</code> に <code>clipboardWrite</code> が必要だったりするし、結局は使おうとしているすべてのAPIがpermissionを必要とするものかどうか知っていないと書けないんだな。</p>
<p>例えば <code>document.querySelector</code> には実は <code>query</code> permissionが必要である、とか言われたらビックリすると思うけど、あり得ない話ではないので、permissionについて全知全能でないとChrome拡張は正しく書けない。</p><hr><p>書いた: <a href="https://r7kamura.com/articles/2022-05-18-learn-chrome-extention-in-y-minutes">Learn Chrome拡張 in Y minutes</a></p><hr><p>社用に、Railsアプリこう書いてほしいガイドを書いていた</p><hr><p><a href="https://r7kamura.com/articles/2022-05-18-learn-chrome-extention-in-y-minutes">Learn Chrome拡張 in Y minutes</a>を書いてて思ったけど、途中までの部分で止めてTemplate Repositoryとして提供すると、つぎ新しく何か拡張つくりたくなったときにすぐに始められて便利かもしれない。でもTemplate Repositoryってテンプレートなんだから入力フィールドとか提供したい。</p>
<p>npm init foo (npm exec create-fooが実行される) は面白いアプローチなんだけど、性格上JavaScript関係の問題解決にしかほぼ使えない。</p><hr><p>リポジトリ作成時に自分自身を書き換えるGitHub Actionを走らせるというアプローチ
<a href="https://simonwillison.net/2021/Aug/28/dynamic-github-repository-templates/">Dynamic content for GitHub repository templates using cookiecutter and GitHub Actions</a></p>]]></content:encoded></item><item><title><![CDATA[2022-05-17]]></title><description><![CDATA[r7kamura's working log on 2022-05-17]]></description><link>https://r7kamura.github.io/diary/articles/11</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/11</guid><pubDate>Mon, 16 May 2022 20:41:17 GMT</pubDate><content:encoded><![CDATA[<hr><p>作業配信する。
<a href="https://www.youtube.com/watch?v=0Os38r8twGk&#x26;ab_channel=r7kamura">作業 with r7kamura #17 - YouTube</a></p><hr><p>rubocop-todo-correctorを業務のRailsアプリの一つに導入した。上手く動いていることを確認した。</p><hr><p>r7kamura/diaryにRSSを追加した。
<a href="https://github.com/r7kamura/diary/pull/10">#10</a></p><hr><p>Amazon URL ShortenerでURLが短縮されないページを見つけたので、色々試してみた。同じようなの本ページでも、いけるものと駄目なものがある。すると、<code>window.onload = ...</code> というコードだと上手く動かないページもあるということが分かった。</p>
<p>content scriptの実行タイミングをmanifestで調整できるようで、ドキュメントを読み終わった後に実行してもらうようにすれば、window.onloadに頼らなくて済む。そもそもwindow.addEventListenerを使いなさいよという話ではあるのだが。という訳で、これを使うようにした。</p>
<p>また、ドキュメント内の要素からASINを見つけられなかった場合にのみURLパターンから正規表現でASINを取り出すというフォールバックを用意したので、これでAmazonフレッシュのような特殊なページにも対応できるようになった。面白いことに、Amazonフレッシュのページではクエリ情報を取り除いたURLでのみ「この商品は過去に50回購入しています」的な情報が表示される。つまり、短縮した方が情報が増える。</p>
<p>Amazon URL Shortenerの開発話はどこかに少しまとめておいた方が良さそうだ。</p>
<ul>
<li><a href="https://developer.chrome.com/docs/extensions/mv3/content_scripts/#registration">https://developer.chrome.com/docs/extensions/mv3/content_scripts/#registration</a></li>
<li><a href="https://github.com/r7kamura/amazon_url_shortener">https://github.com/r7kamura/amazon_url_shortener</a></li>
</ul><hr><p>RSSのitemにdescriptionが空だと若干怒られるっぽかったので、適当に「2022年5月17日の作業ログ」みたいな文字列で埋めることにした。</p><hr><p><a href="https://github.com/r7kamura/gh-diary">https://github.com/r7kamura/gh-diary</a> を改造して、エディタから作業ログを書けるようにした。</p><hr><p>書き直した。
<a href="https://r7kamura.com/articles/2022-05-09-github-issues-for-working-log">GitHub Issuesで作業ログを書く</a></p><hr><p>VSCodeでターミナルを常に全画面パネルで開きたいと思っていたので、設定した。
<a href="https://gist.github.com/r7kamura/1d7b2826bd1da0636c9e511fc8e52e37">Keyboard shortcuts example for VSCode to always open terminal in maximized panel.</a></p><hr><p>見ている業務アプリの一つにrubocop-todo-correctorを導入しようとしたが、そういえば全てのTODOを半年ほど掛けてほぼ気合いで直しきったので、このリポジトリでは不要だった。</p><hr><p>VSCode Rubyのsmart select (shift+alt+left/rightで選択範囲を拡縮できる機能)、引用符とかdo...endブロックとか選択できないのがいまいちで、書き味がかなり悪い。</p>
<p>do...endについては数年前にIssueが上がっていた
<a href="https://github.com/rubyide/vscode-ruby/issues/374">rubyide/vscode-ruby#374</a></p><hr><p><img src="https://user-images.githubusercontent.com/111689/168736521-4c9e92e6-4bfe-40a9-853c-46b463b6f9f7.JPG" alt="IMG_6600">
<img src="https://user-images.githubusercontent.com/111689/168736528-981256e5-79b1-4e7c-88cf-b6bea48525dc.JPG" alt="IMG_6599"></p>
<p>掛け時計が届いたので設置作業を進めた。</p><hr><p>Hatsukey69いいじゃん
<a href="https://shop.yushakobo.jp/products/3073?variant=42085777146087">【委託】Hatsukey69 – 遊舎工房ショップ</a></p><hr><p><img src="https://user-images.githubusercontent.com/111689/168745254-a08a562b-ead5-498a-919a-876cc20f99a6.JPG" alt="IMG_6602"></p>
<p>取り付けた。</p><hr><p><a href="https://github.com/r7kamura/autodoc/issues/64">Rails7にあげるとwarningが出るようになった · Issue #64 · r7kamura/autodoc</a>というIssueを挙げてくれた人がいたので対応した。助かる</p>]]></content:encoded></item><item><title><![CDATA[2022-05-16]]></title><description><![CDATA[r7kamura's working log on 2022-05-16]]></description><link>https://r7kamura.github.io/diary/articles/9</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/9</guid><pubDate>Sun, 15 May 2022 23:47:50 GMT</pubDate><content:encoded><![CDATA[<hr><p>作業配信をする。</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=hmqyfS5opho">https://www.youtube.com/watch?v=hmqyfS5opho</a></li>
</ul><hr><p>RuboCopをRuby 3.1で試したら意図しない挙動が顕れたので、取り急ぎIssueを出した。</p>
<ul>
<li><a href="https://github.com/rubocop/rubocop/issues/10639">rubocop/rubocop#10639</a></li>
</ul>
<p>そんなに詳しく調べてないけど、多分重複したIssueは無いはず…</p><hr><p>作業配信をやると運動不足気味になるはずなので、配信中に何か1つ運動をする、という習慣を取り入れてみることにした。腕立て伏せ1回 (本当に1回)、とかでOK。</p><hr><p>前述のRuboCopのIssueにPull Requestで対応してくれた人がいて良かった。</p><hr><p>auto-correctがsafeかunsafeかを判定する機能を付けて、safeなやつだけpickする機能を付けたい</p>
<ul>
<li><a href="https://github.com/r7kamura/rubocop_todo_corrector">https://github.com/r7kamura/rubocop_todo_corrector</a></li>
</ul><hr><blockquote>
<p>auto-correctがsafeかunsafeかを判定する機能を付けて、safeなやつだけpickする機能を付けたい</p>
</blockquote>
<p>最近の .rubocop_todo.yml だとコメントに記述してくれるので、それをパースすれば良さそう。古いやつはどうなんだろう、ソースコードを見に行けばわかるか？</p><hr><p>pickだけでなく、correctのときにも <code>--auto-correct</code> を使うか <code>--auto-correct-all</code> を使うか、という選択がある。</p><hr><p>ソースコードを奥深くまで辿っていかないと分からない。外部コマンドでRubyを動かして辿らせることもできるが、.rubocop_todo.ymlのコメントを参照する程度に留めておく方が手軽で良いだろうと思う。</p>
<p><a href="https://github.com/rubocop/rubocop/blob/58c56bf75e48543d53fa856e21e58c39371dce2a/lib/rubocop/cop/autocorrect_logic.rb#L27-L29">https://github.com/rubocop/rubocop/blob/58c56bf75e48543d53fa856e21e58c39371dce2a/lib/rubocop/cop/autocorrect_logic.rb#L27-L29</a></p><hr><p>デフォルトではsafeなcopだけを対象にし、<code>only_safe: false</code> というオプションが指定できるようにした。
<a href="https://github.com/r7kamura/rubocop-todo-corrector">https://github.com/r7kamura/rubocop-todo-corrector</a></p><hr><p>書いた。
<a href="https://r7kamura.com/articles/2022-05-16-logicool-capture-obs-missing">Logicool Capture 認識しない OBS</a></p><hr><p>r7kamura/gialogにRSS配信機能を付けると良いのではとは前から思ってはいるが、r7kamura/diaryのような使い方を考えると、単純にIssueのdescription部分だけを、Issueがつくられたタイミングで配信しても意味が無い。</p>
<p>そこで、前日分までの直近20件程度の記事について (前日分ということはつまり日記や日報としての利用を想定しているのでgialogには付けられない)、IssueとIssueCommentのdescriptionを (hr要素か何かで区切りつつ) 全て繋ぎ合わせたものを配信する、ということを考えた。これであれば、前日分のその人の日記や作業ログ的なものをまとめて読めて、新聞的な感じで楽しく読めるし、書いた人も昨日の振り返りが出来て嬉しいはず。</p>
<p>ただ、この仕組みを入れると定期的にビルドするようにスケジューリングか必要になる。このように作業ログ用ツールとして特化させていくと、豪華になっていくので、r7kamura/nippoみたいなテンプレートリポジトリを更につくって、そこに機能を足していく方がいいかもしれない。</p><hr><p>これを何とかしないとNext.jsでRSS吐くのがいつまで経ってもだるいままだ。
<a href="https://github.com/vercel/next.js/discussions/36640">Generate non-HTML files on <code>next export</code> · Discussion #36640 · vercel/next.js</a></p><hr><p>GitHubのコメント欄にフォーカスするためだけのGoogle Chorme拡張、をつくるか悩んでいて今日はつくらなかった。GitHubにキーボードショートカットを増やす拡張、であればつくってもいいと思う一方で他にGitHubで使いたいキーボードショートカットがそんなにないのでそこが逆に難しい。あと5個ぐらい思い付いたらつくってもいいと思う。</p>]]></content:encoded></item><item><title><![CDATA[2022-05-15]]></title><description><![CDATA[r7kamura's working log on 2022-05-15]]></description><link>https://r7kamura.github.io/diary/articles/8</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/8</guid><pubDate>Sat, 14 May 2022 23:00:46 GMT</pubDate><content:encoded><![CDATA[<hr><p>作業配信をしている。</p>
<p><a href="https://www.youtube.com/watch?v=Myo6UXFFfpQ">https://www.youtube.com/watch?v=Myo6UXFFfpQ</a></p><hr><p>全自動ゴミ箱の60L版ぐらいのやつがあれば購入したい</p>
<p><a href="https://townew.jp/">https://townew.jp/</a></p><hr><p>朝からつくってて完成した。</p>
<ul>
<li><a href="https://github.com/r7kamura/rubocop-todo-corrector">https://github.com/r7kamura/rubocop-todo-corrector</a></li>
</ul>]]></content:encoded></item><item><title><![CDATA[2022-05-14]]></title><description><![CDATA[r7kamura's working log on 2022-05-14]]></description><link>https://r7kamura.github.io/diary/articles/7</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/7</guid><pubDate>Sat, 14 May 2022 01:43:50 GMT</pubDate><content:encoded><![CDATA[<hr><p>rubocop-challengeをRailsアプリで動かそうとしてみたが、よく分からないエラーで動かず。</p>
<p>デバッグのために手元でrubocop_challengerを直接実行してみると、更に違うエラーが出て動かず… そもそも <code>rubocop_challenge go</code> を実行すると、そのRailsアプリに含まれているGemfileの内容で <code>bundle install</code> を始めてしまい、なぜそんなことが実行されるのかよく分からない。rubocopの実行に必要なのは、.rubocop.yml のrequireの項目で定義されているものだけのはずなので、<code>bundle install</code> とかしてはいけない。</p><hr><p><code>bundle install</code> の問題は、とりあえずrubocop gem groupのものだけインストールするように、BUNDLE_WITHOUT環境変数を与えるというworkaroundで上手く解決した。そしてrubocop-challengeで発生するエラーを手元で再現できるようになった。</p><hr><p>.rubocop.ymlからローカルの ./lib/foo.rb を読み込むようになっていたせいでエラーが出て処理が止まり、そこで.rubocop_todo.ymlが空の状態に更新され、それを後続の処理がパースしようとしてよく分からないエラーが出て失敗する、という状況だったようだ。</p><hr><p>rubocop_challengerに色々とIssueを出した。</p>
<p>しかし真面目にこういうものを運用したい気持ちがあるなら、適切な機能だけを持つものを自作した方が良いのかもと思いつつある。</p><hr><p>リンク切れを見かけたのでPull Requestを出した。</p>
<ul>
<li><a href="https://github.com/ryz310/rubocop_challenger/pull/619">ryz310/rubocop_challenger#619</a></li>
</ul><hr><p>試しにrubocop_todo_correctorをつくってみたい。</p>
<p>複雑になるので、Pull Requestを出したりする部分はライブラリの外側でやってもらいたいところだが、commitを複数用意してPRを出すとなるとやはりライブラリから叩かないとダメだろうか</p><hr><p>味玉をつくりたいので、味玉のレシピも <a href="https://github.com/r7kamura/cooking">https://github.com/r7kamura/cooking</a> に欲しい。</p><hr><p><img src="https://user-images.githubusercontent.com/111689/168410917-7487582a-86f4-4488-b33b-89be9902da9a.png" alt="image"></p>
<p>用意した。</p>
<p><a href="https://github.com/r7kamura/cooking/blob/d8ae10177844c32c6abe7889fe865f11bbb84770/soy-marinated-egg.md">cooking/soy-marinated-egg.md at main · r7kamura/cooking</a></p><hr><p>とりあえずリポジトリをつくった。実装はまだ無い。</p>
<p><a href="https://github.com/r7kamura/rubocop_todo_corrector">https://github.com/r7kamura/rubocop_todo_corrector</a></p><hr><blockquote>
<p>とりあえずリポジトリをつくった。実装はまだ無い。</p>
<p><a href="https://github.com/r7kamura/rubocop_todo_corrector">https://github.com/r7kamura/rubocop_todo_corrector</a></p>
</blockquote>
<p>そこそこ実装を進めた。bundle installしてrubocop --auto-gen-configを実行できるところまでは出来たが、もう少し機能性を改善したい。50%ぐらいできた感じ。</p><hr><p>運動不足解消の入り口として、腹筋ローラーを配信中にやると良いのではないか</p>]]></content:encoded></item><item><title><![CDATA[2022-05-13]]></title><description><![CDATA[r7kamura's working log on 2022-05-13]]></description><link>https://r7kamura.github.io/diary/articles/6</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/6</guid><pubDate>Thu, 12 May 2022 19:31:29 GMT</pubDate><content:encoded><![CDATA[<hr><p><img src="https://user-images.githubusercontent.com/111689/168153951-525108da-356f-4fef-8b0d-fe008cb34c76.JPG" alt="IMG_6590"></p>
<p>ロジクールから無料保証でマウントパーツを取り寄せたところ、カメラごと届いてしまった。ロジクールさんそういうところあるよね</p><hr><p>サンプルプロジェクトをつくってrubocop_challengerを試運転させてみる</p>
<ul>
<li><a href="https://github.com/ryz310/rubocop_challenger">https://github.com/ryz310/rubocop_challenger</a></li>
</ul><hr><p>rubocop_challengerが上手く動いた。</p>
<ul>
<li><a href="https://github.com/r7kamura/rspec-json_matcher/pull/10">r7kamura/rspec-json_matcher#10</a></li>
</ul>
<pre><code>echo /vendor/ >> .gitignore
</code></pre>
<p>事前にこれをやらないとcommitの作成に失敗するのでハマった。</p>
<p>デフォルトブランチがmainの場合は --base-branch=main オプションを付けないといけない。</p>
<p>何度か実行していると同じCopに対して重複してPull Requestがつくられてしまう。</p>
<ul>
<li><a href="https://github.com/r7kamura/rspec-json_matcher/pull/11">r7kamura/rspec-json_matcher#11</a></li>
</ul><hr><p>custom actionにしている。</p>
<ul>
<li><a href="https://github.com/r7kamura/rubocop-challenge">https://github.com/r7kamura/rubocop-challenge</a></li>
</ul><hr><p>Stripeが<a href="https://markdoc.io/">Markdoc</a>というMarkdownベースの記法を持つドキュメント生成ツールを公開したらしい。</p>
<p>Markdownの記法に加えて、<code>{% foo %}</code> みたいな記法で色々なことができるとのこと。</p><hr><p>OBSでのシーン変更時に音を自動的にfade outできないのか？と思って調べた。</p>
<p>"<a href="https://obsproject.com/forum/threads/fading-audio-between-scenes.122722/">Question / Help - Fading Audio between scenes ?? | OBS Forums</a>" <a href="https://obsproject.com/forum/threads/fading-audio-between-scenes.122722/">https://obsproject.com/forum/threads/fading-audio-between-scenes.122722/</a></p>
<p>デフォルトでそうなっている的なことが言われているので、多分メディアソースでやれば上手くいく？</p><hr><p>書いた: <a href="https://r7kamura.com/articles/2022-05-13-rubocop-challenge">.rubocop_todo.ymlを解消するPull RequestをGitHub Actionsで自動生成する</a></p><hr><p>mermaid記法の練習として、料理メモを置くリポジトリをつくった。</p>
<ul>
<li><a href="https://github.com/r7kamura/cooking">https://github.com/r7kamura/cooking</a></li>
</ul><hr><p>恐らく別の問題でrubocop_challengerがエラーになっていたので原因を調べたところ、別の不具合っぽいものを見つけたのでPull Requestを出した。</p>
<ul>
<li><a href="https://github.com/ryz310/rubocop_challenger/pull/612">ryz310/rubocop_challenger#612</a></li>
</ul>
<p>それから機能要望のIssueを出した。もしかしたら、上のエラーが出たのはこれが原因かもしれない。</p>
<ul>
<li><a href="https://github.com/ryz310/rubocop_challenger/issues/613">ryz310/rubocop_challenger#613</a></li>
</ul><hr><p>書いた: <a href="https://r7kamura.com/articles/2022-05-13-mermaid-recipe-memo">Mermaid記法で料理のレシピを書く</a></p>]]></content:encoded></item><item><title><![CDATA[2022-05-12]]></title><description><![CDATA[r7kamura's working log on 2022-05-12]]></description><link>https://r7kamura.github.io/diary/articles/5</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/5</guid><pubDate>Wed, 11 May 2022 21:15:35 GMT</pubDate><content:encoded><![CDATA[<hr><p>調べたら、うちのマイクアームが3/8オスのネジ、ウェブカメラのマウントパーツが1/4メスのネジ穴を持っているようだった。そこで、1/4オスと3/8メスを持つ変換パーツをAmazonで注文した。</p>
<ul>
<li><a href="https://www.amazon.co.jp/dp/B08XPZWR24">https://www.amazon.co.jp/dp/B08XPZWR24</a></li>
</ul><hr><p>Gemfile.lockの差分をJSONで表示するライブラリと、それを利用して差分が無いことを検知するGitHub Actionsが欲しい。</p><hr><p>こんな感じで、いま現在そのGemfile.lockで指定されているGemについて、バージョンと名前をまとめたやつをJSONとして出力してくれるやつをとりあえず用意すれば良いかな。</p>
<pre><code class="language-ruby">require 'bundler'
require 'json'

content = File.read('Gemfile.lock')
parser = Bundler::LockfileParser.new(content)
array = parser.specs.map do |specification|
  {
    name: specification.name,
    version: specification.version
  }
end
puts JSON.pretty_generate(array)
</code></pre>
<p>こういう感じになる</p>
<pre><code class="language-json">[
  {
    "name": "zache",
    "version": "0.12.0"
  },
  {
    "name": "zeitwerk",
    "version": "2.5.3"
  },
  {
    "name": "zip_tricks",
    "version": "5.6.0"
  }
]
</code></pre>
<hr>
<pre><code class="language-ruby">require 'bundler'
require 'json'

content = File.read('Gemfile.lock')
parser = Bundler::LockfileParser.new(content)
result = parser.specs.each_with_object({}) do |specification, hash|
  hash[specification.name] = specification.version
end
puts JSON.pretty_generate(result)
</code></pre>
<pre><code class="language-json">{
  "zache": "0.12.0",
  "zeitwerk": "2.5.3",
  "zip_tricks": "5.6.0"
}
</code></pre>
<p>Object形式にまとめた方がいいか。</p><hr><p>GitHub Actionsのcustom actionのinputsに、allow_listのような <code>Array&#x3C;String></code> を渡したいが、これは <code>String</code> しか受け付けていない。</p>
<ul>
<li><a href="https://docs.github.com/en//actions/creating-actions/metadata-syntax-for-github-actions">https://docs.github.com/en//actions/creating-actions/metadata-syntax-for-github-actions</a></li>
</ul>
<p>YAMLのヒアドキュメント記法は指示子を指定しなければスペース区切りにできたはずなので、スペース区切りで指定するという制約でいこうかな。</p>
<pre><code>irb(main):067:0" YAML.load &#x3C;&#x3C;-EOS
irb(main):068:0" foo:
irb(main):069:0"   bar
irb(main):070:0"   baz
irb(main):071:0> EOS
=> {"foo"=>"bar baz"}
</code></pre><hr><p>Rubyでカラー表示するの、diffy gemが楽そうだったのでこれ使おうかな。</p>
<p><a href="https://github.com/samg/diffy">https://github.com/samg/diffy</a></p>
<pre><code>$ irb -rdiffy
irb(main):002:0" a = &#x3C;&#x3C;EOS
irb(main):003:0" 1
irb(main):004:0" 2
irb(main):005:0" 3
irb(main):006:0> EOS
=> "1\n2\n3\n"
irb(main):007:0" b = &#x3C;&#x3C;EOS
irb(main):008:0" 2
irb(main):009:0" 2
irb(main):010:0" 4
irb(main):011:0> EOS
=> "2\n2\n4\n"
irb(main):012:0> puts Diffy::Diff.new(a, b)
-1
 2                                                           
-3                                                           
+2                                                           
+4                                                           
=> nil                                                       
irb(main):014:0> puts Diffy::Diff.new(a, b).to_s(:color)
-1
 2                                                                                                    
-3                                                                                                    
+2                                                                                                    
+4                                                                                                    
=> nil
</code></pre>
<p>diff-lcsという老舗のやつも調べたけど面倒になってきた。</p>
<ul>
<li><a href="https://github.com/halostatue/diff-lcs">https://github.com/halostatue/diff-lcs</a></li>
</ul><hr><p>2つのGemfile.lockの差分を検査して、差分があればエラーにしてdiffをANSIカラー付きで表示するCustom actionを書いた。</p>
<ul>
<li><a href="https://github.com/r7kamura/gemfile-diff">https://github.com/r7kamura/gemfile-diff</a></li>
</ul>
<p>実際プロダクションで動かしてみたら不具合が5件ぐらい見つかった (酷い) が、修正したら意図通り動くようになったのでOKだろう。</p>
<p>質とスピードの話で、およそ4回手動でテストした辺りで自動テストを書いた方が効率が良くなってくるという話があった気がする。今回は書かなかったが、テストを簡単に書けるような実装にはしておいたので、書いてみても良かったかもしれない。</p><hr><p>.rubocop_todo.ymlを見て勝手にPull Requestを出してくれるやつがあると教えてもらった。</p>
<ul>
<li><a href="https://github.com/ryz310/rubocop_challenger">https://github.com/ryz310/rubocop_challenger</a></li>
</ul><hr><p>配信のカメラの角度を変えて、PCの画面が完全に映らないようにした。お互い気が散るため。</p><hr><p>rubocop_challengerはコードを読んでみたものの、怪しい箇所が多く、自作した方が良いような気もしてきた。</p><hr><p>チャプター情報が上手く書き出されていた。</p>
<ul>
<li><a href="https://r7kamura.com/articles/2022-05-11-obs-auto-chapter">OBSでチャプター情報を自動で書き出す</a></li>
<li><a href="https://www.youtube.com/watch?v=IFeJ3nFHPKI">作業 with r7kamura #12 - YouTube</a></li>
</ul>]]></content:encoded></item><item><title><![CDATA[2022-05-11]]></title><description><![CDATA[r7kamura's working log on 2022-05-11]]></description><link>https://r7kamura.github.io/diary/articles/4</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/4</guid><pubDate>Tue, 10 May 2022 19:35:05 GMT</pubDate><content:encoded><![CDATA[<hr><p>作業配信をする。</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=eI0U_mbsF_o">作業 with r7kamura #11 - YouTube</a></li>
</ul><hr><p>LuaのプロジェクトつくるためにLintツールとか整えたいんだけど、あんまりそういうのを使う文化圏じゃないのかな</p><hr><p>OBS Studio用のスクリプト置き場をつくった。</p>
<ul>
<li><a href="https://github.com/r7kamura/obs-scripts">https://github.com/r7kamura/obs-scripts</a></li>
</ul><hr><p>StyluaというLua用のFormatterを見つけた。</p>
<ul>
<li><a href="https://github.com/JohnnyMorganz/StyLua">https://github.com/JohnnyMorganz/StyLua</a></li>
<li><a href="https://github.com/JohnnyMorganz/stylua-action">https://github.com/JohnnyMorganz/stylua-action</a></li>
</ul>
<p>obs-scriptsに導入した。インデントがハードタブなのが新鮮。</p>
<p><img src="https://user-images.githubusercontent.com/111689/167722837-7040b8b7-8764-4b43-b606-0eb71430a5a4.png" alt="image"></p><hr><p>YouTubeのチャプターを試して、同名のチャプターがあっても良いということが分かった。</p>
<pre><code>00:00 Scene A
01:23 Scene B
02:34 Scene C
03:45 Scene A
</code></pre><hr><p>現状こうなる。</p>
<pre><code>00:00:00 Work
00:11:23 Break
00:21:23 Work
01:11:23 Break
</code></pre>
<p>こうする方が良いか？ごちゃごちゃしてうるさい気もする。無い方が良いか。</p>
<pre><code>00:00:00 Work 1
00:11:23 Break 1
00:21:23 Work 2
01:11:23 Break 2
</code></pre><hr><p>現状は毎回同一のファイルに出力されるが、できればディレクトリを選ぶとそこに違うファイル名で生成してほしい。配信開始時のタイムスタンプで、chapters-YYYYMMDDhhmmss.txt とかがいいかも。</p><hr><p>ディレクトリを選択する形式にした。</p>
<ul>
<li><a href="https://github.com/r7kamura/obs-scripts/pull/3">r7kamura/obs-scripts#3</a></li>
</ul><hr><p>ディレクトリ構造を整えたり (gh-pagesブランチはやめてdocsディレクトリで運用することにした)、説明を書いたりした。</p>
<ul>
<li><a href="https://github.com/r7kamura/obs-browser-sources">https://github.com/r7kamura/obs-browser-sources</a></li>
</ul><hr><p>色を付けたり、文字サイズを画面幅に合わせたりした。</p>
<ul>
<li><a href="https://r7kamura.github.io/obs-browser-sources/pomodoro.html">https://r7kamura.github.io/obs-browser-sources/pomodoro.html</a></li>
</ul><hr><p>Logicool CaptureがOBSから映像入力デバイスとして認識されなくなってつらい。今朝方Windowsのアップデートがあったが、あれは影響しているだろうか。</p><hr><ul>
<li>Tweetdeck Shortcut Plus</li>
<li>GitHub Shortcut Plus</li>
</ul>
<p>みたいなやつが欲しい。要するに、ユーザーがショートカットキーを設定できる余地を増やしたい。</p><hr><p>書いた: <a href="https://r7kamura.com/articles/2022-05-11-pomodoro-timer-for-obs">OBS用ポモドーロタイマー</a></p><hr><p>書いた: <a href="https://r7kamura.com/articles/2022-05-11-obs-auto-chapter">OBSでチャプター情報を自動で書き出す</a></p><hr><p>GitHubのAppearanceをLight High Contrastに変更したら、ゲームボーイみたいなUIになって良くなった。</p><hr><p>amazon_url_shortenerのmanifest v3化を始めた。permissionsには文字列でURLを指定できなくなったのか。</p>
<p><img src="https://user-images.githubusercontent.com/111689/167769546-b80d8711-ee7c-4345-8267-93c36c6af3e1.png" alt="image"></p>
<ul>
<li><a href="https://github.com/r7kamura/amazon_url_shortener/pull/14">r7kamura/amazon_url_shortener#14</a></li>
</ul><hr><p>manifest v3対応をしつつ、高速化も加えた。URLからASINを推測可能な場合はそれを利用する。</p>
<ul>
<li><a href="https://github.com/r7kamura/amazon_url_shortener">https://github.com/r7kamura/amazon_url_shortener</a></li>
</ul><hr><p>Lua少し調べて書いて上手く動いたものの、環境構築とかテストの書き方とかの情報がもはや検索してもなかなか辿り着くのが難しい状況で、今後これに注力していこうみたいな気持ちにはならなかった。Pythonで書いた方が良かったかも</p>]]></content:encoded></item><item><title><![CDATA[2022-05-10]]></title><description><![CDATA[r7kamura's working log on 2022-05-10]]></description><link>https://r7kamura.github.io/diary/articles/3</link><guid isPermaLink="true">https://r7kamura.github.io/diary/articles/3</guid><pubDate>Mon, 09 May 2022 20:09:57 GMT</pubDate><content:encoded><![CDATA[<hr><p>作業配信をする。</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=jDjO9BkA6Ys">作業 with r7kamura #10 - YouTube</a></li>
</ul><hr><p>昨日の続きを読もうと思っている。classの話あたりから。</p>
<ul>
<li><a href="https://learnxinyminutes.com/docs/lua/">Learn Lua in Y Minutes</a></li>
</ul><hr><p>YouTubeのチャンネルのカスタムURLが、条件を満たしてから10日後に使えるようになったと言っている人を見た。5月19日にまた確認したいところ。</p><hr><p>OBSのスクリプトファイルを試しに書いてみた。</p>
<p>まず、スクリプトは次のディレクトリに置かれている。この場所は、OBSのスクリプト設定画面を選び、適当なスクリプトのコンテキストメニューからファイルの場所を開くことでも確認できる。</p>
<pre><code>C:\Program Files\obs-studio\data\obs-plugins\frontend-tools\scripts
</code></pre>
<p>これらのスクリプトファイルは、変更に管理者権限が必要である。適当にスクリプトファイルをコピーし、hello.luaをつくる。この際にWindowsによって管理者権限の確認が求められる。</p>
<p>Windowでは、hello.luaを右クリックし、プロパティ > セキュリティ > 詳細設定から、ファイルの所有者をAdministratorから自分のユーザーに変更する。自分の場合、r7kamというユーザ名なので、これを入力する。入力時に選択肢とかは一切出ないので、ユーザ名を覚えておく必要があり分かりづらい。</p>
<p>変更したら今度は、プロパティ > セキュリティ > 編集から、追加した所有者に対して変更権限を与える。今回の例ではフルコントロールを与えた。</p>
<p><img src="https://user-images.githubusercontent.com/111689/167494228-3700a3d6-1c34-4f28-885f-1ce147b3b518.png" alt="image"></p>
<p>これで、スクリプトファイル hello.lua を変更するたびにいちいち管理者権限の確認を求められなくて済む。</p>
<p>次の記事を参考に設定した。</p>
<ul>
<li><a href="https://qiita.com/murashi/items/708acd6b37aaf46b4fec">Windowsでファイルのアクセス権変更 - Qiita</a></li>
</ul>
<p>OBSのスクリプトの追加、スクリプトログの確認はこの辺からやる。</p>
<p><img src="https://user-images.githubusercontent.com/111689/167495511-def395e5-d12d-499c-b504-a391130a0466.png" alt="image"></p>
<pre><code class="language-lua">print("Hello")
</code></pre>
<p>これだけ書いたスクリプトを動かすと、こうなる。</p>
<p><img src="https://user-images.githubusercontent.com/111689/167495653-061e74fc-af57-48d7-aab6-a4f6bc09dcfc.png" alt="image"></p><hr><blockquote>
<p>When writing code for OBS, a very time-consuming task is to browse the huge OBS API to determine which functions or combinations of functions are required to reach OBS data.
<a href="https://github.com/obsproject/obs-studio/wiki/Scripting-Tutorial-Source-Shake">https://github.com/obsproject/obs-studio/wiki/Scripting-Tutorial-Source-Shake</a></p>
</blockquote>
<p>tashikani... 🦀</p><hr><p>今回OBSスクリプトを書いてやりたいことをまとめる。</p>
<p>MUST:</p>
<ul>
<li>00分になったらworkシーンへ遷移</li>
<li>50分になったらbreakシーンへ遷移</li>
</ul>
<p>SHOULD:</p>
<ul>
<li>チャプター分割を自動化したいので、日時を記憶してどこかにテキストを書き出し
<ul>
<li>配信開始時</li>
<li>配信終了時</li>
<li>シーン遷移時</li>
</ul>
</li>
</ul>
<p>Lua/Pythonを利用しなくても、browser sourceでもある程度のことは可能。逆にUIを利用するならこちらの方がやりやすい可能性もある。テキストオブジェクトではなくHTMLでUIを提供できるため。</p>
<ul>
<li><a href="https://github.com/obsproject/obs-browser">https://github.com/obsproject/obs-browser</a></li>
</ul>
<p>browser sourceでもチャプター用の文字列も取得こそできそうだけど、ファイルへの書き込みとかは多分できなさそうに推測しているので、文字列をやり取り手段が無いかも。</p>
<p>miyaokaさんが、チャプター書き出しのLuaスクリプトを書いて紹介してくれた。これはoutput.txtに書き出すという仕組みらしい。こういうので良いんだよ感ありますね。何とかJavaScriptでどこかに書き出せないものか… requestbin とかでも良いんで…</p>
<ul>
<li><a href="https://github.com/miyaoka/obs-plugin/blob/cf02c1475fa5cbaad5b8bc1269cb895c866e0702/youtube_chapter.lua">https://github.com/miyaoka/obs-plugin/blob/cf02c1475fa5cbaad5b8bc1269cb895c866e0702/youtube_chapter.lua</a></li>
</ul>
<p>browser sourceで実現できる旨味は、インストールの手間が無い (URL教えるだけ) なところ。</p><hr><p>download属性付きのフォームを用意してJavaScriptでクリックさせることで、テキストファイルをダウンロードさせる、という作戦でいけるかも？</p>
<ul>
<li><a href="https://cyzennt.co.jp/blog/2021/02/04/javascript%EF%BC%9A%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%8B%E3%82%89%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%AE%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE/">https://cyzennt.co.jp/blog/2021/02/04/javascript%EF%BC%9A%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%8B%E3%82%89%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%AE%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE/</a></li>
</ul><hr><p>ブラウザソースを試しに配置する用のリポジトリをつくった。gh-pagesブランチにHTMLを適当に置いて使う。</p>
<ul>
<li><a href="https://github.com/r7kamura/obs-browser-sources">https://github.com/r7kamura/obs-browser-sources</a></li>
</ul><hr><p>ブラウザソースからファイルをダウンロードさせる実験をしたがダメだった。</p><hr><p>ファイルパスを選択するUIが用意されていたので、これでチャプターの書き込み先ファイルパスを選択できるかも。</p>
<ul>
<li><a href="https://obsproject.com/docs/reference-properties.html">https://obsproject.com/docs/reference-properties.html</a></li>
</ul><hr><p>GitHub Actionsでジョブ終了時にMarkdownを表示できる新機能が追加されたらしい。便利そう</p>
<ul>
<li><a href="https://github.blog/2022-05-09-supercharging-github-actions-with-job-summaries/">Supercharging GitHub Actions with Job Summaries | The GitHub Blog</a></li>
</ul><hr><p>一応タイマーが表示されてシーンが自動で遷移されるところまではLuaで書けた。</p>
<ul>
<li><a href="https://gist.github.com/r7kamura/d6538c2291805476c2a3f3d2c58926a8">https://gist.github.com/r7kamura/d6538c2291805476c2a3f3d2c58926a8</a></li>
</ul>
<p>冷静になってみると、チャプター書き出し機能は独立したスクリプト (or プラグイン) として用意しても違和感ないので、シーン遷移 + タイマー表示だけならJavaScriptでブラウザソース使う方が良いかも… URL指定してもらってアクセス権限有効化してもらうだけで済むし…</p><hr><p>OBSの起動オプションをいじると、ブラウザソースでconsole.logでのデバッグができるらしい。</p>
<ul>
<li>"<a href="https://obsproject.com/forum/threads/how-to-get-console-log-in-browsersource.110221/">Question / Help - How to get Console.Log in BrowserSource? | OBS Forums</a>" <a href="https://obsproject.com/forum/threads/how-to-get-console-log-in-browsersource.110221/">https://obsproject.com/forum/threads/how-to-get-console-log-in-browsersource.110221/</a></li>
</ul><hr><blockquote>
<p>SetCurrentScene is only available with 27.2.
<a href="https://github.com/obsproject/obs-browser/issues/347">obsproject/obs-browser#347</a></p>
</blockquote>
<p>OBS 27.2.4で試しているので問題は無いはずだが……</p>
<p>と思ったら、関数名を間違えていた。</p><hr><p><img src="https://user-images.githubusercontent.com/111689/167539561-f03dcd9f-6701-4aa2-934e-9d23a73242df.png" alt="image"></p>
<p>次のようにOBSを起動すると、<a href="http://localhost:9292/">http://localhost:9292/</a> でDevToolsを開いてブラウザソースのデバッグができる。</p>
<pre><code>/path/to/obs64.exe --remote-debugging-port=9222
</code></pre><hr><p>動くようになった。</p>
<p><a href="https://r7kamura.github.io/obs-browser-sources/pomodoro.html">https://r7kamura.github.io/obs-browser-sources/pomodoro.html</a></p>
<p>次の名前の合計2つのシーンが存在する前提で動作する。</p>
<ul>
<li>Work</li>
<li>Break</li>
</ul>
<p>次のように動く。</p>
<ul>
<li>そのシーンの残り時間を表示する</li>
<li>毎時00分にWorkという名前のシーンに遷移する</li>
<li>毎時50分にBreakという名前のシーンに遷移する</li>
</ul><hr><p>Atomic Habitsの次の部分が良かった。</p>
<blockquote>
<p>世界を消費するだけでなく、自分が世界の設計者となろう</p>
</blockquote><hr><p>2021年に買ったものを振り返る記事をあらためて読み返していた。</p>
<p>「欲しいけど大きいから怖くて買えなかったもの」を買うようにした結果、いい買い物が多かったと思う。</p>
<ul>
<li><a href="https://r7kamura.com/articles/2021-12-29-good-buy-2021">良かったもの2021</a></li>
</ul><hr><p>Ctrl+Alt+L で、IssueやPull Requestのtextareaにフォーカスするようにしたら、コメントがすごく捗るようになった。キー自体は余ってたからとりあえずそこにしただけで、何でもいい。</p>
<p>どちらかと言うとコメントは足りない気味なので、もっとチャットみたいにガンガン書き込むべきだと思う。で、思うだけではダメなので、コメントが書かれる仕組みづくりをしっかりしていかないといけない。そのための改善。</p><hr><p>gh-diaryに、エディタからIssueにコメントする機能を付けた。</p>]]></content:encoded></item></channel></rss>